{"ast":null,"code":"// src/localStorageBroadcastChannel.ts\nvar KEY_PREFIX = \"__lsbc__\";\nvar LocalStorageBroadcastChannel = class {\n  constructor(name) {\n    this.eventTarget = window;\n    this.postMessage = data => {\n      if (typeof window === \"undefined\") {\n        return;\n      }\n      try {\n        window.localStorage.setItem(this.channelKey, JSON.stringify(data));\n        window.localStorage.removeItem(this.channelKey);\n      } catch (e) {}\n    };\n    this.addEventListener = (eventName, listener) => {\n      this.eventTarget.addEventListener(this.prefixEventName(eventName), e => {\n        listener(e);\n      });\n    };\n    this.setupLocalStorageListener = () => {\n      const notifyListeners = e => {\n        if (e.key !== this.channelKey || !e.newValue) {\n          return;\n        }\n        try {\n          const data = JSON.parse(e.newValue || \"\");\n          const event = new MessageEvent(this.prefixEventName(\"message\"), {\n            data\n          });\n          this.eventTarget.dispatchEvent(event);\n        } catch (e2) {}\n      };\n      window.addEventListener(\"storage\", notifyListeners);\n    };\n    this.channelKey = KEY_PREFIX + name;\n    this.setupLocalStorageListener();\n  }\n  prefixEventName(eventName) {\n    return this.channelKey + eventName;\n  }\n};\nexport { LocalStorageBroadcastChannel };","map":{"version":3,"mappings":";AAEA,IAAMA,aAAa;AAEZ,IAAMC,+BAAN,MAAsC;EAI3CC,YAAYC,MAAc;IAH1B,KAAiBC,cAAcC;IAQ/B,KAAOC,cAAeC,QAAkB;MACtC,IAAI,OAAOF,WAAW,aAAa;QAEjC;MACF;MAEA,IAAI;QACFA,OAAOG,aAAaC,QAAQ,KAAKC,YAAYC,KAAKC,UAAUL,IAAI,CAAC;QACjEF,OAAOG,aAAaK,WAAW,KAAKH,UAAU;MAChD,SAASI,GAAG,CAEZ;IACF;IAEA,KAAOC,mBAAmB,CAACC,WAAsBC,aAAgC;MAC/E,KAAKb,YAAYW,iBAAiB,KAAKG,gBAAgBF,SAAS,GAAGF,KAAK;QACtEG,SAASH,CAAiB;MAC5B,CAAC;IACH;IAEA,KAAQK,4BAA4B,MAAM;MACxC,MAAMC,kBAAmBN,KAAoB;QAC3C,IAAIA,EAAEO,QAAQ,KAAKX,cAAc,CAACI,EAAEQ,UAAU;UAC5C;QACF;QAEA,IAAI;UACF,MAAMf,OAAOI,KAAKY,MAAMT,EAAEQ,YAAY,EAAE;UACxC,MAAME,QAAQ,IAAIC,aAAa,KAAKP,gBAAgB,SAAS,GAAG;YAC9DX;UACF,CAAC;UACD,KAAKH,YAAYsB,cAAcF,KAAK;QACtC,SAASV,IAAG,CAEZ;MACF;MAEAT,OAAOU,iBAAiB,WAAWK,eAAe;IACpD;IA1CE,KAAKV,aAAaV,aAAaG;IAC/B,KAAKgB,2BAA0B;EACjC;EA0CQD,gBAAgBF,WAA2B;IACjD,OAAO,KAAKN,aAAaM;EAC3B;AACF","names":["KEY_PREFIX","LocalStorageBroadcastChannel","constructor","name","eventTarget","window","postMessage","data","localStorage","setItem","channelKey","JSON","stringify","removeItem","e","addEventListener","eventName","listener","prefixEventName","setupLocalStorageListener","notifyListeners","key","newValue","parse","event","MessageEvent","dispatchEvent"],"sources":["/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/shared/src/localStorageBroadcastChannel.ts"],"sourcesContent":["type Listener<T> = (e: MessageEvent<T>) => void;\n\nconst KEY_PREFIX = '__lsbc__';\n\nexport class LocalStorageBroadcastChannel<E> {\n  private readonly eventTarget = window;\n  private readonly channelKey: string;\n\n  constructor(name: string) {\n    this.channelKey = KEY_PREFIX + name;\n    this.setupLocalStorageListener();\n  }\n\n  public postMessage = (data: E): void => {\n    if (typeof window === 'undefined') {\n      // Silently do nothing\n      return;\n    }\n\n    try {\n      window.localStorage.setItem(this.channelKey, JSON.stringify(data));\n      window.localStorage.removeItem(this.channelKey);\n    } catch (e) {\n      // Silently do nothing\n    }\n  };\n\n  public addEventListener = (eventName: 'message', listener: Listener<E>): void => {\n    this.eventTarget.addEventListener(this.prefixEventName(eventName), e => {\n      listener(e as MessageEvent);\n    });\n  };\n\n  private setupLocalStorageListener = () => {\n    const notifyListeners = (e: StorageEvent) => {\n      if (e.key !== this.channelKey || !e.newValue) {\n        return;\n      }\n\n      try {\n        const data = JSON.parse(e.newValue || '');\n        const event = new MessageEvent(this.prefixEventName('message'), {\n          data,\n        });\n        this.eventTarget.dispatchEvent(event);\n      } catch (e) {\n        //\n      }\n    };\n\n    window.addEventListener('storage', notifyListeners);\n  };\n\n  private prefixEventName(eventName: string): string {\n    return this.channelKey + eventName;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}