{"ast":null,"code":"import { AuthContext, AuthenticateWithRedirectCallback, ClerkLoaded, ClerkLoading, IsomorphicClerkContext, Protect, RedirectToCreateOrganization, RedirectToOrganizationProfile, RedirectToSignIn, RedirectToSignUp, RedirectToUserProfile, SignedIn, SignedOut, customLinkWrongProps, customPageWrongProps, customPagesIgnoredComponent, errorThrower, loadClerkJsScript, multipleChildrenInButtonComponent, multipleClerkProvidersError, organizationProfileLinkRenderedError, organizationProfilePageRenderedError, setErrorThrowerOptions, unsupportedNonBrowserDomainOrProxyUrlFunction, useAuth, useClerk, useEmailLink, useOrganization, useOrganizationList, useSession, useSessionList, useSignIn, useSignUp, useUser, userProfileLinkRenderedError, userProfilePageRenderedError, withClerk } from \"./chunk-TWVGTLGA.mjs\";\nimport { __privateAdd, __privateGet, __privateMethod, __privateSet } from \"./chunk-XUI43LEZ.mjs\";\n\n// src/polyfills.ts\nif (typeof window !== \"undefined\" && !window.global) {\n  window.global = typeof global === \"undefined\" ? window : global;\n}\n\n// src/components/uiComponents.tsx\nimport { logErrorInDevMode as logErrorInDevMode2, without } from \"@clerk/shared\";\nimport { isDeeplyEqual } from \"@clerk/shared/react\";\nimport React5, { createElement } from \"react\";\n\n// src/utils/childrenUtils.tsx\nimport React from \"react\";\nvar assertSingleChild = children => name => {\n  try {\n    return React.Children.only(children);\n  } catch (e) {\n    return errorThrower.throw(multipleChildrenInButtonComponent(name));\n  }\n};\nvar normalizeWithDefaultValue = (children, defaultText) => {\n  if (!children) {\n    children = defaultText;\n  }\n  if (typeof children === \"string\") {\n    children = /* @__PURE__ */React.createElement(\"button\", null, children);\n  }\n  return children;\n};\nvar safeExecute = cb => function () {\n  if (cb && typeof cb === \"function\") {\n    return cb(...arguments);\n  }\n};\n\n// src/utils/isConstructor.ts\nfunction isConstructor(f) {\n  return typeof f === \"function\";\n}\n\n// src/utils/useMaxAllowedInstancesGuard.tsx\nimport React2 from \"react\";\nvar counts = /* @__PURE__ */new Map();\nfunction useMaxAllowedInstancesGuard(name, error) {\n  let maxCount = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  React2.useEffect(() => {\n    const count = counts.get(name) || 0;\n    if (count == maxCount) {\n      return errorThrower.throw(error);\n    }\n    counts.set(name, count + 1);\n    return () => {\n      counts.set(name, (counts.get(name) || 1) - 1);\n    };\n  }, []);\n}\nfunction withMaxAllowedInstancesGuard(WrappedComponent, name, error) {\n  const displayName = WrappedComponent.displayName || WrappedComponent.name || name || \"Component\";\n  const Hoc = props => {\n    useMaxAllowedInstancesGuard(name, error);\n    return /* @__PURE__ */React2.createElement(WrappedComponent, {\n      ...props\n    });\n  };\n  Hoc.displayName = `withMaxAllowedInstancesGuard(${displayName})`;\n  return Hoc;\n}\n\n// src/utils/useCustomElementPortal.tsx\nimport React3, { useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nvar useCustomElementPortal = elements => {\n  const initialState = Array(elements.length).fill(null);\n  const [nodes, setNodes] = useState(initialState);\n  return elements.map((el, index) => ({\n    id: el.id,\n    mount: node => setNodes(prevState => prevState.map((n, i) => i === index ? node : n)),\n    unmount: () => setNodes(prevState => prevState.map((n, i) => i === index ? null : n)),\n    portal: () => /* @__PURE__ */React3.createElement(React3.Fragment, null, nodes[index] ? createPortal(el.component, nodes[index]) : null)\n  }));\n};\n\n// src/utils/useCustomPages.tsx\nimport { logErrorInDevMode } from \"@clerk/shared\";\nimport React4 from \"react\";\nvar isThatComponent = (v, component) => {\n  return !!v && React4.isValidElement(v) && (v == null ? void 0 : v.type) === component;\n};\nvar useUserProfileCustomPages = children => {\n  const reorderItemsLabels = [\"account\", \"security\"];\n  return useCustomPages({\n    children,\n    reorderItemsLabels,\n    LinkComponent: UserProfileLink,\n    PageComponent: UserProfilePage,\n    componentName: \"UserProfile\"\n  });\n};\nvar useOrganizationProfileCustomPages = children => {\n  const reorderItemsLabels = [\"general\", \"members\"];\n  return useCustomPages({\n    children,\n    reorderItemsLabels,\n    LinkComponent: OrganizationProfileLink,\n    PageComponent: OrganizationProfilePage,\n    componentName: \"OrganizationProfile\"\n  });\n};\nvar useCustomPages = _ref => {\n  let {\n    children,\n    LinkComponent,\n    PageComponent,\n    reorderItemsLabels,\n    componentName\n  } = _ref;\n  const validChildren = [];\n  React4.Children.forEach(children, child => {\n    if (!isThatComponent(child, PageComponent) && !isThatComponent(child, LinkComponent)) {\n      if (child) {\n        logErrorInDevMode(customPagesIgnoredComponent(componentName));\n      }\n      return;\n    }\n    const {\n      props\n    } = child;\n    const {\n      children: children2,\n      label,\n      url,\n      labelIcon\n    } = props;\n    if (isThatComponent(child, PageComponent)) {\n      if (isReorderItem(props, reorderItemsLabels)) {\n        validChildren.push({\n          label\n        });\n      } else if (isCustomPage(props)) {\n        validChildren.push({\n          label,\n          labelIcon,\n          children: children2,\n          url\n        });\n      } else {\n        logErrorInDevMode(customPageWrongProps(componentName));\n        return;\n      }\n    }\n    if (isThatComponent(child, LinkComponent)) {\n      if (isExternalLink(props)) {\n        validChildren.push({\n          label,\n          labelIcon,\n          url\n        });\n      } else {\n        logErrorInDevMode(customLinkWrongProps(componentName));\n        return;\n      }\n    }\n  });\n  const customPageContents = [];\n  const customPageLabelIcons = [];\n  const customLinkLabelIcons = [];\n  validChildren.forEach((cp, index) => {\n    if (isCustomPage(cp)) {\n      customPageContents.push({\n        component: cp.children,\n        id: index\n      });\n      customPageLabelIcons.push({\n        component: cp.labelIcon,\n        id: index\n      });\n      return;\n    }\n    if (isExternalLink(cp)) {\n      customLinkLabelIcons.push({\n        component: cp.labelIcon,\n        id: index\n      });\n    }\n  });\n  const customPageContentsPortals = useCustomElementPortal(customPageContents);\n  const customPageLabelIconsPortals = useCustomElementPortal(customPageLabelIcons);\n  const customLinkLabelIconsPortals = useCustomElementPortal(customLinkLabelIcons);\n  const customPages = [];\n  const customPagesPortals = [];\n  validChildren.forEach((cp, index) => {\n    if (isReorderItem(cp, reorderItemsLabels)) {\n      customPages.push({\n        label: cp.label\n      });\n      return;\n    }\n    if (isCustomPage(cp)) {\n      const {\n        portal: contentPortal,\n        mount,\n        unmount\n      } = customPageContentsPortals.find(p => p.id === index);\n      const {\n        portal: labelPortal,\n        mount: mountIcon,\n        unmount: unmountIcon\n      } = customPageLabelIconsPortals.find(p => p.id === index);\n      customPages.push({\n        label: cp.label,\n        url: cp.url,\n        mount,\n        unmount,\n        mountIcon,\n        unmountIcon\n      });\n      customPagesPortals.push(contentPortal);\n      customPagesPortals.push(labelPortal);\n      return;\n    }\n    if (isExternalLink(cp)) {\n      const {\n        portal: labelPortal,\n        mount: mountIcon,\n        unmount: unmountIcon\n      } = customLinkLabelIconsPortals.find(p => p.id === index);\n      customPages.push({\n        label: cp.label,\n        url: cp.url,\n        mountIcon,\n        unmountIcon\n      });\n      customPagesPortals.push(labelPortal);\n      return;\n    }\n  });\n  return {\n    customPages,\n    customPagesPortals\n  };\n};\nvar isReorderItem = (childProps, validItems) => {\n  const {\n    children,\n    label,\n    url,\n    labelIcon\n  } = childProps;\n  return !children && !url && !labelIcon && validItems.some(v => v === label);\n};\nvar isCustomPage = childProps => {\n  const {\n    children,\n    label,\n    url,\n    labelIcon\n  } = childProps;\n  return !!children && !!url && !!labelIcon && !!label;\n};\nvar isExternalLink = childProps => {\n  const {\n    children,\n    label,\n    url,\n    labelIcon\n  } = childProps;\n  return !children && !!url && !!labelIcon && !!label;\n};\n\n// src/components/uiComponents.tsx\nvar isMountProps = props => {\n  return \"mount\" in props;\n};\nvar isOpenProps = props => {\n  return \"open\" in props;\n};\nvar Portal = class extends React5.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.portalRef = React5.createRef();\n  }\n  componentDidUpdate(_prevProps) {\n    var _a, _b;\n    if (!isMountProps(_prevProps) || !isMountProps(this.props)) {\n      return;\n    }\n    const prevProps = without(_prevProps.props, \"customPages\", \"children\");\n    const newProps = without(this.props.props, \"customPages\", \"children\");\n    const customPagesChanged = ((_a = prevProps.customPages) == null ? void 0 : _a.length) !== ((_b = newProps.customPages) == null ? void 0 : _b.length);\n    if (!isDeeplyEqual(prevProps, newProps) || customPagesChanged) {\n      this.props.updateProps({\n        node: this.portalRef.current,\n        props: this.props.props\n      });\n    }\n  }\n  componentDidMount() {\n    if (this.portalRef.current) {\n      if (isMountProps(this.props)) {\n        this.props.mount(this.portalRef.current, this.props.props);\n      }\n      if (isOpenProps(this.props)) {\n        this.props.open(this.props.props);\n      }\n    }\n  }\n  componentWillUnmount() {\n    if (this.portalRef.current) {\n      if (isMountProps(this.props)) {\n        this.props.unmount(this.portalRef.current);\n      }\n      if (isOpenProps(this.props)) {\n        this.props.close();\n      }\n    }\n  }\n  render() {\n    var _a, _b;\n    return /* @__PURE__ */React5.createElement(React5.Fragment, null, /* @__PURE__ */React5.createElement(\"div\", {\n      ref: this.portalRef\n    }), isMountProps(this.props) && ((_b = (_a = this.props) == null ? void 0 : _a.customPagesPortals) == null ? void 0 : _b.map((portal, index) => createElement(portal, {\n      key: index\n    }))));\n  }\n};\nvar SignIn = withClerk(_ref2 => {\n  let {\n    clerk,\n    ...props\n  } = _ref2;\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountSignIn,\n    unmount: clerk.unmountSignIn,\n    updateProps: clerk.__unstable__updateProps,\n    props\n  });\n}, \"SignIn\");\nvar SignUp = withClerk(_ref3 => {\n  let {\n    clerk,\n    ...props\n  } = _ref3;\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountSignUp,\n    unmount: clerk.unmountSignUp,\n    updateProps: clerk.__unstable__updateProps,\n    props\n  });\n}, \"SignUp\");\nfunction UserProfilePage(_ref4) {\n  let {\n    children\n  } = _ref4;\n  logErrorInDevMode2(userProfilePageRenderedError);\n  return /* @__PURE__ */React5.createElement(React5.Fragment, null, children);\n}\nfunction UserProfileLink(_ref5) {\n  let {\n    children\n  } = _ref5;\n  logErrorInDevMode2(userProfileLinkRenderedError);\n  return /* @__PURE__ */React5.createElement(React5.Fragment, null, children);\n}\nvar _UserProfile = withClerk(_ref6 => {\n  let {\n    clerk,\n    ...props\n  } = _ref6;\n  const {\n    customPages,\n    customPagesPortals\n  } = useUserProfileCustomPages(props.children);\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountUserProfile,\n    unmount: clerk.unmountUserProfile,\n    updateProps: clerk.__unstable__updateProps,\n    props: {\n      ...props,\n      customPages\n    },\n    customPagesPortals\n  });\n}, \"UserProfile\");\nvar UserProfile = Object.assign(_UserProfile, {\n  Page: UserProfilePage,\n  Link: UserProfileLink\n});\nvar _UserButton = withClerk(_ref7 => {\n  let {\n    clerk,\n    ...props\n  } = _ref7;\n  const {\n    customPages,\n    customPagesPortals\n  } = useUserProfileCustomPages(props.children);\n  const userProfileProps = Object.assign(props.userProfileProps || {}, {\n    customPages\n  });\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountUserButton,\n    unmount: clerk.unmountUserButton,\n    updateProps: clerk.__unstable__updateProps,\n    props: {\n      ...props,\n      userProfileProps\n    },\n    customPagesPortals\n  });\n}, \"UserButton\");\nvar UserButton = Object.assign(_UserButton, {\n  UserProfilePage,\n  UserProfileLink\n});\nfunction OrganizationProfilePage(_ref8) {\n  let {\n    children\n  } = _ref8;\n  logErrorInDevMode2(organizationProfilePageRenderedError);\n  return /* @__PURE__ */React5.createElement(React5.Fragment, null, children);\n}\nfunction OrganizationProfileLink(_ref9) {\n  let {\n    children\n  } = _ref9;\n  logErrorInDevMode2(organizationProfileLinkRenderedError);\n  return /* @__PURE__ */React5.createElement(React5.Fragment, null, children);\n}\nvar _OrganizationProfile = withClerk(_ref10 => {\n  let {\n    clerk,\n    ...props\n  } = _ref10;\n  const {\n    customPages,\n    customPagesPortals\n  } = useOrganizationProfileCustomPages(props.children);\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountOrganizationProfile,\n    unmount: clerk.unmountOrganizationProfile,\n    updateProps: clerk.__unstable__updateProps,\n    props: {\n      ...props,\n      customPages\n    },\n    customPagesPortals\n  });\n}, \"OrganizationProfile\");\nvar OrganizationProfile = Object.assign(_OrganizationProfile, {\n  Page: OrganizationProfilePage,\n  Link: OrganizationProfileLink\n});\nvar CreateOrganization = withClerk(_ref11 => {\n  let {\n    clerk,\n    ...props\n  } = _ref11;\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountCreateOrganization,\n    unmount: clerk.unmountCreateOrganization,\n    updateProps: clerk.__unstable__updateProps,\n    props\n  });\n}, \"CreateOrganization\");\nvar _OrganizationSwitcher = withClerk(_ref12 => {\n  let {\n    clerk,\n    ...props\n  } = _ref12;\n  const {\n    customPages,\n    customPagesPortals\n  } = useOrganizationProfileCustomPages(props.children);\n  const organizationProfileProps = Object.assign(props.organizationProfileProps || {}, {\n    customPages\n  });\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountOrganizationSwitcher,\n    unmount: clerk.unmountOrganizationSwitcher,\n    updateProps: clerk.__unstable__updateProps,\n    props: {\n      ...props,\n      organizationProfileProps\n    },\n    customPagesPortals\n  });\n}, \"OrganizationSwitcher\");\nvar OrganizationSwitcher = Object.assign(_OrganizationSwitcher, {\n  OrganizationProfilePage,\n  OrganizationProfileLink\n});\nvar OrganizationList = withClerk(_ref13 => {\n  let {\n    clerk,\n    ...props\n  } = _ref13;\n  return /* @__PURE__ */React5.createElement(Portal, {\n    mount: clerk.mountOrganizationList,\n    unmount: clerk.unmountOrganizationList,\n    updateProps: clerk.__unstable__updateProps,\n    props\n  });\n}, \"OrganizationList\");\nvar GoogleOneTap = withClerk(_ref14 => {\n  let {\n    clerk,\n    ...props\n  } = _ref14;\n  return /* @__PURE__ */React5.createElement(Portal, {\n    open: clerk.openGoogleOneTap,\n    close: clerk.closeGoogleOneTap,\n    props\n  });\n}, \"GoogleOneTap\");\n\n// src/components/SignInButton.tsx\nimport React6 from \"react\";\nvar SignInButton = withClerk(_ref15 => {\n  let {\n    clerk,\n    children,\n    ...props\n  } = _ref15;\n  const {\n    signUpFallbackRedirectUrl,\n    forceRedirectUrl,\n    fallbackRedirectUrl,\n    signUpForceRedirectUrl,\n    mode,\n    ...rest\n  } = props;\n  children = normalizeWithDefaultValue(children, \"Sign in\");\n  const child = assertSingleChild(children)(\"SignInButton\");\n  const clickHandler = () => {\n    const opts = {\n      forceRedirectUrl,\n      fallbackRedirectUrl,\n      signUpFallbackRedirectUrl,\n      signUpForceRedirectUrl\n    };\n    if (mode === \"modal\") {\n      return clerk.openSignIn(opts);\n    }\n    return clerk.redirectToSignIn({\n      ...opts,\n      signInFallbackRedirectUrl: fallbackRedirectUrl,\n      signInForceRedirectUrl: forceRedirectUrl\n    });\n  };\n  const wrappedChildClickHandler = async e => {\n    if (child && typeof child === \"object\" && \"props\" in child) {\n      await safeExecute(child.props.onClick)(e);\n    }\n    return clickHandler();\n  };\n  const childProps = {\n    ...rest,\n    onClick: wrappedChildClickHandler\n  };\n  return React6.cloneElement(child, childProps);\n}, \"SignInButton\");\n\n// src/components/SignUpButton.tsx\nimport React7 from \"react\";\nvar SignUpButton = withClerk(_ref16 => {\n  let {\n    clerk,\n    children,\n    ...props\n  } = _ref16;\n  const {\n    fallbackRedirectUrl,\n    forceRedirectUrl,\n    signInFallbackRedirectUrl,\n    signInForceRedirectUrl,\n    mode,\n    unsafeMetadata,\n    ...rest\n  } = props;\n  children = normalizeWithDefaultValue(children, \"Sign up\");\n  const child = assertSingleChild(children)(\"SignUpButton\");\n  const clickHandler = () => {\n    const opts = {\n      fallbackRedirectUrl,\n      forceRedirectUrl,\n      signInFallbackRedirectUrl,\n      signInForceRedirectUrl,\n      unsafeMetadata\n    };\n    if (mode === \"modal\") {\n      return clerk.openSignUp(opts);\n    }\n    return clerk.redirectToSignUp({\n      ...opts,\n      signUpFallbackRedirectUrl: fallbackRedirectUrl,\n      signUpForceRedirectUrl: forceRedirectUrl\n    });\n  };\n  const wrappedChildClickHandler = async e => {\n    if (child && typeof child === \"object\" && \"props\" in child) {\n      await safeExecute(child.props.onClick)(e);\n    }\n    return clickHandler();\n  };\n  const childProps = {\n    ...rest,\n    onClick: wrappedChildClickHandler\n  };\n  return React7.cloneElement(child, childProps);\n}, \"SignUpButton\");\n\n// src/components/SignOutButton.tsx\nimport React8 from \"react\";\nvar SignOutButton = withClerk(_ref17 => {\n  let {\n    clerk,\n    children,\n    ...props\n  } = _ref17;\n  const {\n    redirectUrl = \"/\",\n    signOutOptions,\n    ...rest\n  } = props;\n  children = normalizeWithDefaultValue(children, \"Sign out\");\n  const child = assertSingleChild(children)(\"SignOutButton\");\n  const clickHandler = () => clerk.signOut({\n    redirectUrl\n  });\n  const wrappedChildClickHandler = async e => {\n    await safeExecute(child.props.onClick)(e);\n    return clickHandler();\n  };\n  const childProps = {\n    ...rest,\n    onClick: wrappedChildClickHandler\n  };\n  return React8.cloneElement(child, childProps);\n}, \"SignOutButton\");\n\n// src/components/SignInWithMetamaskButton.tsx\nimport React9 from \"react\";\nvar SignInWithMetamaskButton = withClerk(_ref18 => {\n  let {\n    clerk,\n    children,\n    ...props\n  } = _ref18;\n  const {\n    redirectUrl,\n    ...rest\n  } = props;\n  children = normalizeWithDefaultValue(children, \"Sign in with Metamask\");\n  const child = assertSingleChild(children)(\"SignInWithMetamaskButton\");\n  const clickHandler = async () => {\n    async function authenticate() {\n      await clerk.authenticateWithMetamask({\n        redirectUrl: redirectUrl || void 0\n      });\n    }\n    void authenticate();\n  };\n  const wrappedChildClickHandler = async e => {\n    await safeExecute(child.props.onClick)(e);\n    return clickHandler();\n  };\n  const childProps = {\n    ...rest,\n    onClick: wrappedChildClickHandler\n  };\n  return React9.cloneElement(child, childProps);\n}, \"SignInWithMetamask\");\n\n// src/contexts/ClerkProvider.tsx\nimport { isPublishableKey } from \"@clerk/shared/keys\";\nimport React11 from \"react\";\n\n// src/contexts/ClerkContextProvider.tsx\nimport { ClientContext, OrganizationProvider, SessionContext, UserContext } from \"@clerk/shared/react\";\nimport React10 from \"react\";\n\n// src/isomorphicClerk.ts\nimport { inBrowser } from \"@clerk/shared/browser\";\nimport { handleValueOrFn } from \"@clerk/shared/handleValueOrFn\";\nvar SDK_METADATA = {\n  name: \"@clerk/clerk-react\",\n  version: \"5.2.3\",\n  environment: process.env.NODE_ENV\n};\nvar _loaded, _domain, _proxyUrl, _publishableKey, _instance, _waitForClerkJS, waitForClerkJS_fn;\nvar _IsomorphicClerk = class _IsomorphicClerk {\n  constructor(options) {\n    var _this = this;\n    __privateAdd(this, _waitForClerkJS);\n    this.clerkjs = null;\n    this.preopenOneTap = null;\n    this.preopenSignIn = null;\n    this.preopenSignUp = null;\n    this.preopenUserProfile = null;\n    this.preopenOrganizationProfile = null;\n    this.preopenCreateOrganization = null;\n    this.premountSignInNodes = /* @__PURE__ */new Map();\n    this.premountSignUpNodes = /* @__PURE__ */new Map();\n    this.premountUserProfileNodes = /* @__PURE__ */new Map();\n    this.premountUserButtonNodes = /* @__PURE__ */new Map();\n    this.premountOrganizationProfileNodes = /* @__PURE__ */new Map();\n    this.premountCreateOrganizationNodes = /* @__PURE__ */new Map();\n    this.premountOrganizationSwitcherNodes = /* @__PURE__ */new Map();\n    this.premountOrganizationListNodes = /* @__PURE__ */new Map();\n    this.premountMethodCalls = /* @__PURE__ */new Map();\n    this.loadedListeners = [];\n    __privateAdd(this, _loaded, false);\n    __privateAdd(this, _domain, void 0);\n    __privateAdd(this, _proxyUrl, void 0);\n    __privateAdd(this, _publishableKey, void 0);\n    this.buildSignInUrl = opts => {\n      const callback = () => {\n        var _a;\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildSignInUrl(opts)) || \"\";\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildSignInUrl\", callback);\n      }\n    };\n    this.buildSignUpUrl = opts => {\n      const callback = () => {\n        var _a;\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildSignUpUrl(opts)) || \"\";\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildSignUpUrl\", callback);\n      }\n    };\n    this.buildAfterSignInUrl = () => {\n      const callback = () => {\n        var _a;\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildAfterSignInUrl()) || \"\";\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildAfterSignInUrl\", callback);\n      }\n    };\n    this.buildAfterSignUpUrl = () => {\n      const callback = () => {\n        var _a;\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildAfterSignUpUrl()) || \"\";\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildAfterSignUpUrl\", callback);\n      }\n    };\n    this.buildAfterSignOutUrl = () => {\n      const callback = () => {\n        var _a;\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildAfterSignOutUrl()) || \"\";\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildAfterSignOutUrl\", callback);\n      }\n    };\n    this.buildUserProfileUrl = () => {\n      const callback = () => {\n        var _a;\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildUserProfileUrl()) || \"\";\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildUserProfileUrl\", callback);\n      }\n    };\n    this.buildCreateOrganizationUrl = () => {\n      const callback = () => {\n        var _a;\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildCreateOrganizationUrl()) || \"\";\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildCreateOrganizationUrl\", callback);\n      }\n    };\n    this.buildOrganizationProfileUrl = () => {\n      const callback = () => {\n        var _a;\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildOrganizationProfileUrl()) || \"\";\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildOrganizationProfileUrl\", callback);\n      }\n    };\n    this.buildUrlWithAuth = to => {\n      const callback = () => {\n        var _a;\n        return ((_a = this.clerkjs) == null ? void 0 : _a.buildUrlWithAuth(to)) || \"\";\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"buildUrlWithAuth\", callback);\n      }\n    };\n    this.handleUnauthenticated = () => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.handleUnauthenticated();\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        void callback();\n      } else {\n        this.premountMethodCalls.set(\"handleUnauthenticated\", callback);\n      }\n    };\n    this.addOnLoaded = cb => {\n      this.loadedListeners.push(cb);\n      if (this.loaded) {\n        this.emitLoaded();\n      }\n    };\n    this.emitLoaded = () => {\n      this.loadedListeners.forEach(cb => cb());\n      this.loadedListeners = [];\n    };\n    this.hydrateClerkJS = clerkjs => {\n      if (!clerkjs) {\n        throw new Error(\"Failed to hydrate latest Clerk JS\");\n      }\n      this.clerkjs = clerkjs;\n      this.premountMethodCalls.forEach(cb => cb());\n      if (this.preopenSignIn !== null) {\n        clerkjs.openSignIn(this.preopenSignIn);\n      }\n      if (this.preopenSignUp !== null) {\n        clerkjs.openSignUp(this.preopenSignUp);\n      }\n      if (this.preopenUserProfile !== null) {\n        clerkjs.openUserProfile(this.preopenUserProfile);\n      }\n      if (this.preopenOneTap !== null) {\n        clerkjs.openGoogleOneTap(this.preopenOneTap);\n      }\n      if (this.preopenOrganizationProfile !== null) {\n        clerkjs.openOrganizationProfile(this.preopenOrganizationProfile);\n      }\n      if (this.preopenCreateOrganization !== null) {\n        clerkjs.openCreateOrganization(this.preopenCreateOrganization);\n      }\n      this.premountSignInNodes.forEach((props, node) => {\n        clerkjs.mountSignIn(node, props);\n      });\n      this.premountSignUpNodes.forEach((props, node) => {\n        clerkjs.mountSignUp(node, props);\n      });\n      this.premountUserProfileNodes.forEach((props, node) => {\n        clerkjs.mountUserProfile(node, props);\n      });\n      this.premountUserButtonNodes.forEach((props, node) => {\n        clerkjs.mountUserButton(node, props);\n      });\n      this.premountOrganizationListNodes.forEach((props, node) => {\n        clerkjs.mountOrganizationList(node, props);\n      });\n      __privateSet(this, _loaded, true);\n      this.emitLoaded();\n      return this.clerkjs;\n    };\n    this.__unstable__updateProps = props => {\n      if (this.clerkjs && \"__unstable__updateProps\" in this.clerkjs) {\n        this.clerkjs.__unstable__updateProps(props);\n      } else {\n        return void 0;\n      }\n    };\n    /**\n     * `setActive` can be used to set the active session and/or organization.\n     */\n    this.setActive = _ref19 => {\n      let {\n        session,\n        organization,\n        beforeEmit\n      } = _ref19;\n      if (this.clerkjs) {\n        return this.clerkjs.setActive({\n          session,\n          organization,\n          beforeEmit\n        });\n      } else {\n        return Promise.reject();\n      }\n    };\n    this.openSignIn = props => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.openSignIn(props);\n      } else {\n        this.preopenSignIn = props;\n      }\n    };\n    this.closeSignIn = () => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.closeSignIn();\n      } else {\n        this.preopenSignIn = null;\n      }\n    };\n    this.openGoogleOneTap = props => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.openGoogleOneTap(props);\n      } else {\n        this.preopenOneTap = props;\n      }\n    };\n    this.closeGoogleOneTap = () => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.closeGoogleOneTap();\n      } else {\n        this.preopenOneTap = null;\n      }\n    };\n    this.openUserProfile = props => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.openUserProfile(props);\n      } else {\n        this.preopenUserProfile = props;\n      }\n    };\n    this.closeUserProfile = () => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.closeUserProfile();\n      } else {\n        this.preopenUserProfile = null;\n      }\n    };\n    this.openOrganizationProfile = props => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.openOrganizationProfile(props);\n      } else {\n        this.preopenOrganizationProfile = props;\n      }\n    };\n    this.closeOrganizationProfile = () => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.closeOrganizationProfile();\n      } else {\n        this.preopenOrganizationProfile = null;\n      }\n    };\n    this.openCreateOrganization = props => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.openCreateOrganization(props);\n      } else {\n        this.preopenCreateOrganization = props;\n      }\n    };\n    this.closeCreateOrganization = () => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.closeCreateOrganization();\n      } else {\n        this.preopenCreateOrganization = null;\n      }\n    };\n    this.openSignUp = props => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.openSignUp(props);\n      } else {\n        this.preopenSignUp = props;\n      }\n    };\n    this.closeSignUp = () => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.closeSignUp();\n      } else {\n        this.preopenSignUp = null;\n      }\n    };\n    this.mountSignIn = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountSignIn(node, props);\n      } else {\n        this.premountSignInNodes.set(node, props);\n      }\n    };\n    this.unmountSignIn = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountSignIn(node);\n      } else {\n        this.premountSignInNodes.delete(node);\n      }\n    };\n    this.mountSignUp = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountSignUp(node, props);\n      } else {\n        this.premountSignUpNodes.set(node, props);\n      }\n    };\n    this.unmountSignUp = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountSignUp(node);\n      } else {\n        this.premountSignUpNodes.delete(node);\n      }\n    };\n    this.mountUserProfile = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountUserProfile(node, props);\n      } else {\n        this.premountUserProfileNodes.set(node, props);\n      }\n    };\n    this.unmountUserProfile = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountUserProfile(node);\n      } else {\n        this.premountUserProfileNodes.delete(node);\n      }\n    };\n    this.mountOrganizationProfile = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountOrganizationProfile(node, props);\n      } else {\n        this.premountOrganizationProfileNodes.set(node, props);\n      }\n    };\n    this.unmountOrganizationProfile = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountOrganizationProfile(node);\n      } else {\n        this.premountOrganizationProfileNodes.delete(node);\n      }\n    };\n    this.mountCreateOrganization = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountCreateOrganization(node, props);\n      } else {\n        this.premountCreateOrganizationNodes.set(node, props);\n      }\n    };\n    this.unmountCreateOrganization = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountCreateOrganization(node);\n      } else {\n        this.premountCreateOrganizationNodes.delete(node);\n      }\n    };\n    this.mountOrganizationSwitcher = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountOrganizationSwitcher(node, props);\n      } else {\n        this.premountOrganizationSwitcherNodes.set(node, props);\n      }\n    };\n    this.unmountOrganizationSwitcher = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountOrganizationSwitcher(node);\n      } else {\n        this.premountOrganizationSwitcherNodes.delete(node);\n      }\n    };\n    this.mountOrganizationList = (node, props) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountOrganizationList(node, props);\n      } else {\n        this.premountOrganizationListNodes.set(node, props);\n      }\n    };\n    this.unmountOrganizationList = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountOrganizationList(node);\n      } else {\n        this.premountOrganizationListNodes.delete(node);\n      }\n    };\n    this.mountUserButton = (node, userButtonProps) => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.mountUserButton(node, userButtonProps);\n      } else {\n        this.premountUserButtonNodes.set(node, userButtonProps);\n      }\n    };\n    this.unmountUserButton = node => {\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        this.clerkjs.unmountUserButton(node);\n      } else {\n        this.premountUserButtonNodes.delete(node);\n      }\n    };\n    this.addListener = listener => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.addListener(listener);\n      };\n      if (this.clerkjs) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"addListener\", callback);\n        return () => this.premountMethodCalls.delete(\"addListener\");\n      }\n    };\n    this.navigate = to => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.navigate(to);\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        void callback();\n      } else {\n        this.premountMethodCalls.set(\"navigate\", callback);\n      }\n    };\n    this.redirectWithAuth = async function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      const callback = () => {\n        var _a;\n        return (_a = _this.clerkjs) == null ? void 0 : _a.redirectWithAuth(...args);\n      };\n      if (_this.clerkjs && __privateGet(_this, _loaded)) {\n        return callback();\n      } else {\n        _this.premountMethodCalls.set(\"redirectWithAuth\", callback);\n        return;\n      }\n    };\n    this.redirectToSignIn = async opts => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToSignIn(opts);\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToSignIn\", callback);\n        return;\n      }\n    };\n    this.redirectToSignUp = async opts => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToSignUp(opts);\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToSignUp\", callback);\n        return;\n      }\n    };\n    this.redirectToUserProfile = async () => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToUserProfile();\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToUserProfile\", callback);\n        return;\n      }\n    };\n    this.redirectToAfterSignUp = () => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToAfterSignUp();\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToAfterSignUp\", callback);\n      }\n    };\n    this.redirectToAfterSignIn = () => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToAfterSignIn();\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToAfterSignIn\", callback);\n      }\n    };\n    this.redirectToAfterSignOut = () => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToAfterSignOut();\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToAfterSignOut\", callback);\n      }\n    };\n    this.redirectToOrganizationProfile = async () => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToOrganizationProfile();\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToOrganizationProfile\", callback);\n        return;\n      }\n    };\n    this.redirectToCreateOrganization = async () => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.redirectToCreateOrganization();\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"redirectToCreateOrganization\", callback);\n        return;\n      }\n    };\n    this.handleRedirectCallback = params => {\n      var _a;\n      const callback = () => {\n        var _a2;\n        return (_a2 = this.clerkjs) == null ? void 0 : _a2.handleRedirectCallback(params);\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        void ((_a = callback()) == null ? void 0 : _a.catch(() => {}));\n      } else {\n        this.premountMethodCalls.set(\"handleRedirectCallback\", callback);\n      }\n    };\n    this.handleGoogleOneTapCallback = (signInOrUp, params) => {\n      var _a;\n      const callback = () => {\n        var _a2;\n        return (_a2 = this.clerkjs) == null ? void 0 : _a2.handleGoogleOneTapCallback(signInOrUp, params);\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        void ((_a = callback()) == null ? void 0 : _a.catch(() => {}));\n      } else {\n        this.premountMethodCalls.set(\"handleGoogleOneTapCallback\", callback);\n      }\n    };\n    this.handleEmailLinkVerification = async params => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.handleEmailLinkVerification(params);\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"handleEmailLinkVerification\", callback);\n      }\n    };\n    this.authenticateWithMetamask = async params => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.authenticateWithMetamask(params);\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"authenticateWithMetamask\", callback);\n      }\n    };\n    this.authenticateWithGoogleOneTap = async params => {\n      const clerkjs = await __privateMethod(this, _waitForClerkJS, waitForClerkJS_fn).call(this);\n      return clerkjs.authenticateWithGoogleOneTap(params);\n    };\n    this.createOrganization = async params => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.createOrganization(params);\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"createOrganization\", callback);\n      }\n    };\n    this.getOrganization = async organizationId => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.getOrganization(organizationId);\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"getOrganization\", callback);\n      }\n    };\n    this.signOut = async (signOutCallbackOrOptions, options) => {\n      const callback = () => {\n        var _a;\n        return (_a = this.clerkjs) == null ? void 0 : _a.signOut(signOutCallbackOrOptions, options);\n      };\n      if (this.clerkjs && __privateGet(this, _loaded)) {\n        return callback();\n      } else {\n        this.premountMethodCalls.set(\"signOut\", callback);\n      }\n    };\n    const {\n      Clerk = null,\n      publishableKey\n    } = options || {};\n    __privateSet(this, _publishableKey, publishableKey);\n    __privateSet(this, _proxyUrl, options == null ? void 0 : options.proxyUrl);\n    __privateSet(this, _domain, options == null ? void 0 : options.domain);\n    this.options = options;\n    this.Clerk = Clerk;\n    this.mode = inBrowser() ? \"browser\" : \"server\";\n    if (!this.options.sdkMetadata) {\n      this.options.sdkMetadata = SDK_METADATA;\n    }\n    void this.loadClerkJS();\n  }\n  get publishableKey() {\n    return __privateGet(this, _publishableKey);\n  }\n  get loaded() {\n    return __privateGet(this, _loaded);\n  }\n  static getOrCreateInstance(options) {\n    if (!inBrowser() || !__privateGet(this, _instance) || options.Clerk && __privateGet(this, _instance).Clerk !== options.Clerk) {\n      __privateSet(this, _instance, new _IsomorphicClerk(options));\n    }\n    return __privateGet(this, _instance);\n  }\n  static clearInstance() {\n    __privateSet(this, _instance, null);\n  }\n  get domain() {\n    if (typeof window !== \"undefined\" && window.location) {\n      return handleValueOrFn(__privateGet(this, _domain), new URL(window.location.href), \"\");\n    }\n    if (typeof __privateGet(this, _domain) === \"function\") {\n      return errorThrower.throw(unsupportedNonBrowserDomainOrProxyUrlFunction);\n    }\n    return __privateGet(this, _domain) || \"\";\n  }\n  get proxyUrl() {\n    if (typeof window !== \"undefined\" && window.location) {\n      return handleValueOrFn(__privateGet(this, _proxyUrl), new URL(window.location.href), \"\");\n    }\n    if (typeof __privateGet(this, _proxyUrl) === \"function\") {\n      return errorThrower.throw(unsupportedNonBrowserDomainOrProxyUrlFunction);\n    }\n    return __privateGet(this, _proxyUrl) || \"\";\n  }\n  get sdkMetadata() {\n    var _a;\n    return ((_a = this.clerkjs) == null ? void 0 : _a.sdkMetadata) || this.options.sdkMetadata || void 0;\n  }\n  get instanceType() {\n    var _a;\n    return (_a = this.clerkjs) == null ? void 0 : _a.instanceType;\n  }\n  get frontendApi() {\n    var _a;\n    return ((_a = this.clerkjs) == null ? void 0 : _a.frontendApi) || \"\";\n  }\n  get isStandardBrowser() {\n    var _a;\n    return ((_a = this.clerkjs) == null ? void 0 : _a.isStandardBrowser) || this.options.standardBrowser || false;\n  }\n  get isSatellite() {\n    if (typeof window !== \"undefined\" && window.location) {\n      return handleValueOrFn(this.options.isSatellite, new URL(window.location.href), false);\n    }\n    if (typeof this.options.isSatellite === \"function\") {\n      return errorThrower.throw(unsupportedNonBrowserDomainOrProxyUrlFunction);\n    }\n    return false;\n  }\n  async loadClerkJS() {\n    var _a;\n    if (this.mode !== \"browser\" || __privateGet(this, _loaded)) {\n      return;\n    }\n    if (typeof window !== \"undefined\") {\n      window.__clerk_publishable_key = __privateGet(this, _publishableKey);\n      window.__clerk_proxy_url = this.proxyUrl;\n      window.__clerk_domain = this.domain;\n    }\n    try {\n      if (this.Clerk) {\n        let c;\n        if (isConstructor(this.Clerk)) {\n          c = new this.Clerk(__privateGet(this, _publishableKey), {\n            proxyUrl: this.proxyUrl,\n            domain: this.domain\n          });\n          await c.load(this.options);\n        } else {\n          c = this.Clerk;\n          if (!c.loaded) {\n            await c.load(this.options);\n          }\n        }\n        global.Clerk = c;\n      } else {\n        if (!global.Clerk) {\n          await loadClerkJsScript({\n            ...this.options,\n            publishableKey: __privateGet(this, _publishableKey),\n            proxyUrl: this.proxyUrl,\n            domain: this.domain\n          });\n        }\n        if (!global.Clerk) {\n          throw new Error(\"Failed to download latest ClerkJS. Contact support@clerk.com.\");\n        }\n        await global.Clerk.load(this.options);\n      }\n      if ((_a = global.Clerk) == null ? void 0 : _a.loaded) {\n        return this.hydrateClerkJS(global.Clerk);\n      }\n      return;\n    } catch (err) {\n      const error = err;\n      if (process.env.NODE_ENV === \"production\") {\n        console.error(error.stack || error.message || error);\n      } else {\n        throw err;\n      }\n      return;\n    }\n  }\n  get version() {\n    var _a;\n    return (_a = this.clerkjs) == null ? void 0 : _a.version;\n  }\n  get client() {\n    if (this.clerkjs) {\n      return this.clerkjs.client;\n    } else {\n      return void 0;\n    }\n  }\n  get session() {\n    if (this.clerkjs) {\n      return this.clerkjs.session;\n    } else {\n      return void 0;\n    }\n  }\n  get user() {\n    if (this.clerkjs) {\n      return this.clerkjs.user;\n    } else {\n      return void 0;\n    }\n  }\n  get organization() {\n    if (this.clerkjs) {\n      return this.clerkjs.organization;\n    } else {\n      return void 0;\n    }\n  }\n  get telemetry() {\n    if (this.clerkjs) {\n      return this.clerkjs.telemetry;\n    } else {\n      return void 0;\n    }\n  }\n  get __unstable__environment() {\n    if (this.clerkjs) {\n      return this.clerkjs.__unstable__environment;\n    } else {\n      return void 0;\n    }\n  }\n  __unstable__setEnvironment() {\n    if (this.clerkjs && \"__unstable__setEnvironment\" in this.clerkjs) {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      this.clerkjs.__unstable__setEnvironment(args);\n    } else {\n      return void 0;\n    }\n  }\n};\n_loaded = new WeakMap();\n_domain = new WeakMap();\n_proxyUrl = new WeakMap();\n_publishableKey = new WeakMap();\n_instance = new WeakMap();\n_waitForClerkJS = new WeakSet();\nwaitForClerkJS_fn = function () {\n  return new Promise(resolve => {\n    if (__privateGet(this, _loaded)) {\n      resolve(this.clerkjs);\n    }\n    this.addOnLoaded(() => resolve(this.clerkjs));\n  });\n};\n__privateAdd(_IsomorphicClerk, _instance, void 0);\nvar IsomorphicClerk = _IsomorphicClerk;\n\n// src/utils/deriveState.ts\nvar deriveState = (clerkLoaded, state, initialState) => {\n  if (!clerkLoaded && initialState) {\n    return deriveFromSsrInitialState(initialState);\n  }\n  return deriveFromClientSideState(state);\n};\nvar deriveFromSsrInitialState = initialState => {\n  const userId = initialState.userId;\n  const user = initialState.user;\n  const sessionId = initialState.sessionId;\n  const session = initialState.session;\n  const organization = initialState.organization;\n  const orgId = initialState.orgId;\n  const orgRole = initialState.orgRole;\n  const orgPermissions = initialState.orgPermissions;\n  const orgSlug = initialState.orgSlug;\n  const actor = initialState.actor;\n  return {\n    userId,\n    user,\n    sessionId,\n    session,\n    organization,\n    orgId,\n    orgRole,\n    orgPermissions,\n    orgSlug,\n    actor\n  };\n};\nvar deriveFromClientSideState = state => {\n  var _a;\n  const userId = state.user ? state.user.id : state.user;\n  const user = state.user;\n  const sessionId = state.session ? state.session.id : state.session;\n  const session = state.session;\n  const actor = session == null ? void 0 : session.actor;\n  const organization = state.organization;\n  const orgId = state.organization ? state.organization.id : state.organization;\n  const orgSlug = organization == null ? void 0 : organization.slug;\n  const membership = organization ? (_a = user == null ? void 0 : user.organizationMemberships) == null ? void 0 : _a.find(om => om.organization.id === orgId) : organization;\n  const orgPermissions = membership ? membership.permissions : membership;\n  const orgRole = membership ? membership.role : membership;\n  return {\n    userId,\n    user,\n    sessionId,\n    session,\n    organization,\n    orgId,\n    orgRole,\n    orgSlug,\n    orgPermissions,\n    actor\n  };\n};\n\n// src/contexts/ClerkContextProvider.tsx\nfunction ClerkContextProvider(props) {\n  const {\n    isomorphicClerkOptions,\n    initialState,\n    children\n  } = props;\n  const {\n    isomorphicClerk: clerk,\n    loaded: clerkLoaded\n  } = useLoadedIsomorphicClerk(isomorphicClerkOptions);\n  const [state, setState] = React10.useState({\n    client: clerk.client,\n    session: clerk.session,\n    user: clerk.user,\n    organization: clerk.organization\n  });\n  React10.useEffect(() => {\n    return clerk.addListener(e => setState({\n      ...e\n    }));\n  }, []);\n  const derivedState = deriveState(clerkLoaded, state, initialState);\n  const clerkCtx = React10.useMemo(() => ({\n    value: clerk\n  }), [clerkLoaded]);\n  const clientCtx = React10.useMemo(() => ({\n    value: state.client\n  }), [state.client]);\n  const {\n    sessionId,\n    session,\n    userId,\n    user,\n    orgId,\n    actor,\n    organization,\n    orgRole,\n    orgSlug,\n    orgPermissions\n  } = derivedState;\n  const authCtx = React10.useMemo(() => {\n    const value = {\n      sessionId,\n      userId,\n      actor,\n      orgId,\n      orgRole,\n      orgSlug,\n      orgPermissions\n    };\n    return {\n      value\n    };\n  }, [sessionId, userId, actor, orgId, orgRole, orgSlug]);\n  const userCtx = React10.useMemo(() => ({\n    value: user\n  }), [userId, user]);\n  const sessionCtx = React10.useMemo(() => ({\n    value: session\n  }), [sessionId, session]);\n  const organizationCtx = React10.useMemo(() => {\n    const value = {\n      organization\n    };\n    return {\n      value\n    };\n  }, [orgId, organization]);\n  return (\n    // @ts-expect-error value passed is of type IsomorphicClerk where the context expects LoadedClerk\n    /* @__PURE__ */\n    React10.createElement(IsomorphicClerkContext.Provider, {\n      value: clerkCtx\n    }, /* @__PURE__ */React10.createElement(ClientContext.Provider, {\n      value: clientCtx\n    }, /* @__PURE__ */React10.createElement(SessionContext.Provider, {\n      value: sessionCtx\n    }, /* @__PURE__ */React10.createElement(OrganizationProvider, {\n      ...organizationCtx.value\n    }, /* @__PURE__ */React10.createElement(AuthContext.Provider, {\n      value: authCtx\n    }, /* @__PURE__ */React10.createElement(UserContext.Provider, {\n      value: userCtx\n    }, children))))))\n  );\n}\nvar useLoadedIsomorphicClerk = options => {\n  const [loaded, setLoaded] = React10.useState(false);\n  const isomorphicClerk = React10.useMemo(() => IsomorphicClerk.getOrCreateInstance(options), []);\n  React10.useEffect(() => {\n    isomorphicClerk.__unstable__updateProps({\n      appearance: options.appearance\n    });\n  }, [options.appearance]);\n  React10.useEffect(() => {\n    isomorphicClerk.__unstable__updateProps({\n      options\n    });\n  }, [options.localization]);\n  React10.useEffect(() => {\n    isomorphicClerk.addOnLoaded(() => setLoaded(true));\n  }, []);\n  React10.useEffect(() => {\n    return () => {\n      IsomorphicClerk.clearInstance();\n    };\n  }, []);\n  return {\n    isomorphicClerk,\n    loaded\n  };\n};\n\n// src/contexts/ClerkProvider.tsx\nfunction ClerkProviderBase(props) {\n  const {\n    initialState,\n    children,\n    ...restIsomorphicClerkOptions\n  } = props;\n  const {\n    publishableKey = \"\",\n    Clerk: userInitialisedClerk\n  } = restIsomorphicClerkOptions;\n  if (!userInitialisedClerk) {\n    if (!publishableKey) {\n      errorThrower.throwMissingPublishableKeyError();\n    } else if (publishableKey && !isPublishableKey(publishableKey)) {\n      errorThrower.throwInvalidPublishableKeyError({\n        key: publishableKey\n      });\n    }\n  }\n  return /* @__PURE__ */React11.createElement(ClerkContextProvider, {\n    initialState,\n    isomorphicClerkOptions: restIsomorphicClerkOptions\n  }, children);\n}\nvar ClerkProvider = withMaxAllowedInstancesGuard(ClerkProviderBase, \"ClerkProvider\", multipleClerkProvidersError);\nClerkProvider.displayName = \"ClerkProvider\";\n\n// src/index.ts\nsetErrorThrowerOptions({\n  packageName: \"@clerk/clerk-react\"\n});\nexport { AuthenticateWithRedirectCallback, ClerkLoaded, ClerkLoading, ClerkProvider, CreateOrganization, GoogleOneTap, OrganizationList, OrganizationProfile, OrganizationSwitcher, Protect, RedirectToCreateOrganization, RedirectToOrganizationProfile, RedirectToSignIn, RedirectToSignUp, RedirectToUserProfile, SignIn, SignInButton, SignInWithMetamaskButton, SignOutButton, SignUp, SignUpButton, SignedIn, SignedOut, UserButton, UserProfile, useAuth, useClerk, useEmailLink, useOrganization, useOrganizationList, useSession, useSessionList, useSignIn, useSignUp, useUser };","map":{"version":3,"mappings":"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","names":["window","global","logErrorInDevMode","without","isDeeplyEqual","React","createElement","assertSingleChild","children","name","Children","only","e","errorThrower","throw","multipleChildrenInButtonComponent","normalizeWithDefaultValue","defaultText","safeExecute","cb","isConstructor","f","counts","Map","useMaxAllowedInstancesGuard","error","maxCount","useEffect","count","get","set","withMaxAllowedInstancesGuard","WrappedComponent","displayName","Hoc","props","useState","createPortal","useCustomElementPortal","elements","initialState","Array","length","fill","nodes","setNodes","map","el","index","id","mount","node","prevState","n","i","unmount","portal","component","isThatComponent","v","isValidElement","type","useUserProfileCustomPages","reorderItemsLabels","useCustomPages","LinkComponent","UserProfileLink","PageComponent","UserProfilePage","componentName","useOrganizationProfileCustomPages","OrganizationProfileLink","OrganizationProfilePage","validChildren","forEach","child","customPagesIgnoredComponent","label","url","labelIcon","isReorderItem","push","isCustomPage","customPageWrongProps","isExternalLink","customLinkWrongProps","customPageContents","customPageLabelIcons","customLinkLabelIcons","cp","customPageContentsPortals","customPageLabelIconsPortals","customLinkLabelIconsPortals","customPages","customPagesPortals","contentPortal","find","p","labelPortal","mountIcon","unmountIcon","childProps","validItems","some","isMountProps","isOpenProps","Portal","PureComponent","constructor","portalRef","createRef","componentDidUpdate","_prevProps","prevProps","newProps","customPagesChanged","_a","_b","updateProps","current","componentDidMount","open","componentWillUnmount","close","render","ref","key","SignIn","withClerk","clerk","mountSignIn","unmountSignIn","__unstable__updateProps","SignUp","mountSignUp","unmountSignUp","userProfilePageRenderedError","userProfileLinkRenderedError","_UserProfile","mountUserProfile","unmountUserProfile","UserProfile","Object","assign","Page","Link","_UserButton","userProfileProps","mountUserButton","unmountUserButton","UserButton","organizationProfilePageRenderedError","organizationProfileLinkRenderedError","_OrganizationProfile","mountOrganizationProfile","unmountOrganizationProfile","OrganizationProfile","CreateOrganization","mountCreateOrganization","unmountCreateOrganization","_OrganizationSwitcher","organizationProfileProps","mountOrganizationSwitcher","unmountOrganizationSwitcher","OrganizationSwitcher","OrganizationList","mountOrganizationList","unmountOrganizationList","GoogleOneTap","openGoogleOneTap","closeGoogleOneTap","SignInButton","signUpFallbackRedirectUrl","forceRedirectUrl","fallbackRedirectUrl","signUpForceRedirectUrl","mode","rest","clickHandler","opts","openSignIn","redirectToSignIn","signInFallbackRedirectUrl","signInForceRedirectUrl","wrappedChildClickHandler","onClick","cloneElement","SignUpButton","unsafeMetadata","openSignUp","redirectToSignUp","SignOutButton","redirectUrl","signOutOptions","signOut","SignInWithMetamaskButton","authenticate","authenticateWithMetamask","isPublishableKey","ClientContext","OrganizationProvider","SessionContext","UserContext","inBrowser","handleValueOrFn","SDK_METADATA","version","environment","process","env","NODE_ENV","_IsomorphicClerk","options","__privateAdd","clerkjs","preopenOneTap","preopenSignIn","preopenSignUp","preopenUserProfile","preopenOrganizationProfile","preopenCreateOrganization","premountSignInNodes","premountSignUpNodes","premountUserProfileNodes","premountUserButtonNodes","premountOrganizationProfileNodes","premountCreateOrganizationNodes","premountOrganizationSwitcherNodes","premountOrganizationListNodes","premountMethodCalls","loadedListeners","callback","buildSignInUrl","__privateGet","_loaded","buildSignUpUrl","buildAfterSignInUrl","buildAfterSignUpUrl","buildAfterSignOutUrl","buildUserProfileUrl","buildCreateOrganizationUrl","buildOrganizationProfileUrl","to","buildUrlWithAuth","handleUnauthenticated","addOnLoaded","loaded","emitLoaded","hydrateClerkJS","Error","openUserProfile","openOrganizationProfile","openCreateOrganization","__privateSet","session","organization","beforeEmit","setActive","Promise","reject","closeSignIn","closeUserProfile","closeOrganizationProfile","closeCreateOrganization","closeSignUp","delete","userButtonProps","listener","addListener","navigate","args","redirectWithAuth","redirectToUserProfile","redirectToAfterSignUp","redirectToAfterSignIn","redirectToAfterSignOut","redirectToOrganizationProfile","redirectToCreateOrganization","params","handleRedirectCallback","catch","signInOrUp","handleGoogleOneTapCallback","handleEmailLinkVerification","__privateMethod","_waitForClerkJS","call","authenticateWithGoogleOneTap","createOrganization","organizationId","getOrganization","signOutCallbackOrOptions","Clerk","publishableKey","_publishableKey","_proxyUrl","proxyUrl","_domain","domain","sdkMetadata","loadClerkJS","getOrCreateInstance","_instance","clearInstance","location","URL","href","unsupportedNonBrowserDomainOrProxyUrlFunction","instanceType","frontendApi","isStandardBrowser","standardBrowser","isSatellite","__clerk_publishable_key","__clerk_proxy_url","__clerk_domain","c","load","loadClerkJsScript","err","console","stack","message","client","user","telemetry","__unstable__environment","__unstable__setEnvironment","waitForClerkJS_fn","resolve","IsomorphicClerk","deriveState","clerkLoaded","state","deriveFromSsrInitialState","deriveFromClientSideState","userId","sessionId","orgId","orgRole","orgPermissions","orgSlug","actor","slug","membership","organizationMemberships","om","permissions","role","ClerkContextProvider","isomorphicClerkOptions","isomorphicClerk","useLoadedIsomorphicClerk","setState","derivedState","clerkCtx","useMemo","value","clientCtx","authCtx","userCtx","sessionCtx","organizationCtx","IsomorphicClerkContext","Provider","AuthContext","setLoaded","appearance","localization","ClerkProviderBase","restIsomorphicClerkOptions","userInitialisedClerk","throwMissingPublishableKeyError","throwInvalidPublishableKeyError","ClerkProvider","multipleClerkProvidersError","setErrorThrowerOptions","packageName"],"sources":["/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/polyfills.ts","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/components/uiComponents.tsx","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/utils/childrenUtils.tsx","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/utils/isConstructor.ts","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/utils/useMaxAllowedInstancesGuard.tsx","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/utils/useCustomElementPortal.tsx","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/utils/useCustomPages.tsx","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/components/SignInButton.tsx","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/components/SignUpButton.tsx","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/components/SignOutButton.tsx","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/components/SignInWithMetamaskButton.tsx","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/contexts/ClerkProvider.tsx","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/contexts/ClerkContextProvider.tsx","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/isomorphicClerk.ts","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/utils/deriveState.ts","/home/vanistelrooy/Downloads/Expense-Tracker-Application-master/frontend/node_modules/@clerk/clerk-react/src/index.ts"],"sourcesContent":["/**\n * Vite does not define `global` by default\n * One workaround is to use the `define` config prop\n * https://vitejs.dev/config/#define\n * We are solving this in the SDK level to reduce setup steps.\n */\nif (typeof window !== 'undefined' && !window.global) {\n  window.global = typeof global === 'undefined' ? window : global;\n}\n\nexport {};\n","import { logErrorInDevMode, without } from '@clerk/shared';\nimport { isDeeplyEqual } from '@clerk/shared/react';\nimport type {\n  CreateOrganizationProps,\n  GoogleOneTapProps,\n  OrganizationListProps,\n  OrganizationProfileProps,\n  OrganizationSwitcherProps,\n  SignInProps,\n  SignUpProps,\n  UserButtonProps,\n  UserProfileProps,\n  Without,\n} from '@clerk/types';\nimport type { PropsWithChildren } from 'react';\nimport React, { createElement } from 'react';\n\nimport {\n  organizationProfileLinkRenderedError,\n  organizationProfilePageRenderedError,\n  userProfileLinkRenderedError,\n  userProfilePageRenderedError,\n} from '../errors/messages';\nimport type {\n  MountProps,\n  OpenProps,\n  OrganizationProfileLinkProps,\n  OrganizationProfilePageProps,\n  UserProfileLinkProps,\n  UserProfilePageProps,\n  WithClerkProp,\n} from '../types';\nimport { useOrganizationProfileCustomPages, useUserProfileCustomPages } from '../utils';\nimport { withClerk } from './withClerk';\n\ntype UserProfileExportType = typeof _UserProfile & {\n  Page: typeof UserProfilePage;\n  Link: typeof UserProfileLink;\n};\n\ntype UserButtonExportType = typeof _UserButton & {\n  UserProfilePage: typeof UserProfilePage;\n  UserProfileLink: typeof UserProfileLink;\n};\n\ntype UserButtonPropsWithoutCustomPages = Without<UserButtonProps, 'userProfileProps'> & {\n  userProfileProps?: Pick<UserProfileProps, 'additionalOAuthScopes' | 'appearance'>;\n};\n\ntype OrganizationProfileExportType = typeof _OrganizationProfile & {\n  Page: typeof OrganizationProfilePage;\n  Link: typeof OrganizationProfileLink;\n};\n\ntype OrganizationSwitcherExportType = typeof _OrganizationSwitcher & {\n  OrganizationProfilePage: typeof OrganizationProfilePage;\n  OrganizationProfileLink: typeof OrganizationProfileLink;\n};\n\ntype OrganizationSwitcherPropsWithoutCustomPages = Without<OrganizationSwitcherProps, 'organizationProfileProps'> & {\n  organizationProfileProps?: Pick<OrganizationProfileProps, 'appearance'>;\n};\n\n// README: <Portal/> should be a class pure component in order for mount and unmount\n// lifecycle props to be invoked correctly. Replacing the class component with a\n// functional component wrapped with a React.memo is not identical to the original\n// class implementation due to React intricacies such as the useEffects cleanup\n// seems to run AFTER unmount, while componentWillUnmount runs BEFORE.\n\n// More information can be found at https://clerk.slack.com/archives/C015S0BGH8R/p1624891993016300\n\n// The function Portal implementation is commented out for future reference.\n\n// const Portal = React.memo(({ props, mount, unmount }: MountProps) => {\n//   const portalRef = React.createRef<HTMLDivElement>();\n\n//   useEffect(() => {\n//     if (portalRef.current) {\n//       mount(portalRef.current, props);\n//     }\n//     return () => {\n//       if (portalRef.current) {\n//         unmount(portalRef.current);\n//       }\n//     };\n//   }, []);\n\n//   return <div ref={portalRef} />;\n// });\n\n// Portal.displayName = 'ClerkPortal';\n\nconst isMountProps = (props: any): props is MountProps => {\n  return 'mount' in props;\n};\n\nconst isOpenProps = (props: any): props is OpenProps => {\n  return 'open' in props;\n};\n\nclass Portal extends React.PureComponent<MountProps | OpenProps> {\n  private portalRef = React.createRef<HTMLDivElement>();\n\n  componentDidUpdate(_prevProps: Readonly<MountProps | OpenProps>) {\n    if (!isMountProps(_prevProps) || !isMountProps(this.props)) {\n      return;\n    }\n    // Remove children and customPages from props before comparing\n    // children might hold circular references which deepEqual can't handle\n    // and the implementation of customPages relies on props getting new references\n    const prevProps = without(_prevProps.props, 'customPages', 'children');\n    const newProps = without(this.props.props, 'customPages', 'children');\n    // instead, we simply use the length of customPages to determine if it changed or not\n    const customPagesChanged = prevProps.customPages?.length !== newProps.customPages?.length;\n    if (!isDeeplyEqual(prevProps, newProps) || customPagesChanged) {\n      this.props.updateProps({ node: this.portalRef.current, props: this.props.props });\n    }\n  }\n\n  componentDidMount() {\n    if (this.portalRef.current) {\n      if (isMountProps(this.props)) {\n        this.props.mount(this.portalRef.current, this.props.props);\n      }\n\n      if (isOpenProps(this.props)) {\n        this.props.open(this.props.props);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.portalRef.current) {\n      if (isMountProps(this.props)) {\n        this.props.unmount(this.portalRef.current);\n      }\n      if (isOpenProps(this.props)) {\n        this.props.close();\n      }\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <div ref={this.portalRef} />\n        {isMountProps(this.props) &&\n          this.props?.customPagesPortals?.map((portal, index) => createElement(portal, { key: index }))}\n      </>\n    );\n  }\n}\n\nexport const SignIn = withClerk(({ clerk, ...props }: WithClerkProp<SignInProps>) => {\n  return (\n    <Portal\n      mount={clerk.mountSignIn}\n      unmount={clerk.unmountSignIn}\n      updateProps={(clerk as any).__unstable__updateProps}\n      props={props}\n    />\n  );\n}, 'SignIn');\n\nexport const SignUp = withClerk(({ clerk, ...props }: WithClerkProp<SignUpProps>) => {\n  return (\n    <Portal\n      mount={clerk.mountSignUp}\n      unmount={clerk.unmountSignUp}\n      updateProps={(clerk as any).__unstable__updateProps}\n      props={props}\n    />\n  );\n}, 'SignUp');\n\nexport function UserProfilePage({ children }: PropsWithChildren<UserProfilePageProps>) {\n  logErrorInDevMode(userProfilePageRenderedError);\n  return <>{children}</>;\n}\n\nexport function UserProfileLink({ children }: PropsWithChildren<UserProfileLinkProps>) {\n  logErrorInDevMode(userProfileLinkRenderedError);\n  return <>{children}</>;\n}\n\nconst _UserProfile = withClerk(\n  ({ clerk, ...props }: WithClerkProp<PropsWithChildren<Without<UserProfileProps, 'customPages'>>>) => {\n    const { customPages, customPagesPortals } = useUserProfileCustomPages(props.children);\n    return (\n      <Portal\n        mount={clerk.mountUserProfile}\n        unmount={clerk.unmountUserProfile}\n        updateProps={(clerk as any).__unstable__updateProps}\n        props={{ ...props, customPages }}\n        customPagesPortals={customPagesPortals}\n      />\n    );\n  },\n  'UserProfile',\n);\n\nexport const UserProfile: UserProfileExportType = Object.assign(_UserProfile, {\n  Page: UserProfilePage,\n  Link: UserProfileLink,\n});\n\nconst _UserButton = withClerk(\n  ({ clerk, ...props }: WithClerkProp<PropsWithChildren<UserButtonPropsWithoutCustomPages>>) => {\n    const { customPages, customPagesPortals } = useUserProfileCustomPages(props.children);\n    const userProfileProps = Object.assign(props.userProfileProps || {}, { customPages });\n    return (\n      <Portal\n        mount={clerk.mountUserButton}\n        unmount={clerk.unmountUserButton}\n        updateProps={(clerk as any).__unstable__updateProps}\n        props={{ ...props, userProfileProps }}\n        customPagesPortals={customPagesPortals}\n      />\n    );\n  },\n  'UserButton',\n);\n\nexport const UserButton: UserButtonExportType = Object.assign(_UserButton, {\n  UserProfilePage,\n  UserProfileLink,\n});\n\nexport function OrganizationProfilePage({ children }: PropsWithChildren<OrganizationProfilePageProps>) {\n  logErrorInDevMode(organizationProfilePageRenderedError);\n  return <>{children}</>;\n}\n\nexport function OrganizationProfileLink({ children }: PropsWithChildren<OrganizationProfileLinkProps>) {\n  logErrorInDevMode(organizationProfileLinkRenderedError);\n  return <>{children}</>;\n}\n\nconst _OrganizationProfile = withClerk(\n  ({ clerk, ...props }: WithClerkProp<PropsWithChildren<Without<OrganizationProfileProps, 'customPages'>>>) => {\n    const { customPages, customPagesPortals } = useOrganizationProfileCustomPages(props.children);\n    return (\n      <Portal\n        mount={clerk.mountOrganizationProfile}\n        unmount={clerk.unmountOrganizationProfile}\n        updateProps={(clerk as any).__unstable__updateProps}\n        props={{ ...props, customPages }}\n        customPagesPortals={customPagesPortals}\n      />\n    );\n  },\n  'OrganizationProfile',\n);\n\nexport const OrganizationProfile: OrganizationProfileExportType = Object.assign(_OrganizationProfile, {\n  Page: OrganizationProfilePage,\n  Link: OrganizationProfileLink,\n});\n\nexport const CreateOrganization = withClerk(({ clerk, ...props }: WithClerkProp<CreateOrganizationProps>) => {\n  return (\n    <Portal\n      mount={clerk.mountCreateOrganization}\n      unmount={clerk.unmountCreateOrganization}\n      updateProps={(clerk as any).__unstable__updateProps}\n      props={props}\n    />\n  );\n}, 'CreateOrganization');\n\nconst _OrganizationSwitcher = withClerk(\n  ({ clerk, ...props }: WithClerkProp<PropsWithChildren<OrganizationSwitcherPropsWithoutCustomPages>>) => {\n    const { customPages, customPagesPortals } = useOrganizationProfileCustomPages(props.children);\n    const organizationProfileProps = Object.assign(props.organizationProfileProps || {}, { customPages });\n    return (\n      <Portal\n        mount={clerk.mountOrganizationSwitcher}\n        unmount={clerk.unmountOrganizationSwitcher}\n        updateProps={(clerk as any).__unstable__updateProps}\n        props={{ ...props, organizationProfileProps }}\n        customPagesPortals={customPagesPortals}\n      />\n    );\n  },\n  'OrganizationSwitcher',\n);\n\nexport const OrganizationSwitcher: OrganizationSwitcherExportType = Object.assign(_OrganizationSwitcher, {\n  OrganizationProfilePage,\n  OrganizationProfileLink,\n});\n\nexport const OrganizationList = withClerk(({ clerk, ...props }: WithClerkProp<OrganizationListProps>) => {\n  return (\n    <Portal\n      mount={clerk.mountOrganizationList}\n      unmount={clerk.unmountOrganizationList}\n      updateProps={(clerk as any).__unstable__updateProps}\n      props={props}\n    />\n  );\n}, 'OrganizationList');\n\nexport const GoogleOneTap = withClerk(({ clerk, ...props }: WithClerkProp<GoogleOneTapProps>) => {\n  return (\n    <Portal\n      open={clerk.openGoogleOneTap}\n      close={clerk.closeGoogleOneTap}\n      props={props}\n    />\n  );\n}, 'GoogleOneTap');\n","import React from 'react';\n\nimport { errorThrower } from '../errors/errorThrower';\nimport { multipleChildrenInButtonComponent } from '../errors/messages';\n\nexport const assertSingleChild =\n  (children: React.ReactNode) =>\n  (name: 'SignInButton' | 'SignUpButton' | 'SignOutButton' | 'SignInWithMetamaskButton') => {\n    try {\n      return React.Children.only(children);\n    } catch (e) {\n      return errorThrower.throw(multipleChildrenInButtonComponent(name));\n    }\n  };\n\nexport const normalizeWithDefaultValue = (children: React.ReactNode | undefined, defaultText: string) => {\n  if (!children) {\n    children = defaultText;\n  }\n  if (typeof children === 'string') {\n    children = <button>{children}</button>;\n  }\n  return children;\n};\n\nexport const safeExecute =\n  (cb: unknown) =>\n  (...args: any) => {\n    if (cb && typeof cb === 'function') {\n      return cb(...args);\n    }\n  };\n","export function isConstructor<T>(f: any): f is T {\n  return typeof f === 'function';\n}\n","import React from 'react';\n\nimport { errorThrower } from '../errors/errorThrower';\n\nconst counts = new Map<string, number>();\n\nexport function useMaxAllowedInstancesGuard(name: string, error: string, maxCount = 1): void {\n  React.useEffect(() => {\n    const count = counts.get(name) || 0;\n    if (count == maxCount) {\n      return errorThrower.throw(error);\n    }\n    counts.set(name, count + 1);\n\n    return () => {\n      counts.set(name, (counts.get(name) || 1) - 1);\n    };\n  }, []);\n}\n\nexport function withMaxAllowedInstancesGuard<P>(\n  WrappedComponent: React.ComponentType<P>,\n  name: string,\n  error: string,\n): React.ComponentType<P> {\n  const displayName = WrappedComponent.displayName || WrappedComponent.name || name || 'Component';\n  const Hoc = (props: P) => {\n    useMaxAllowedInstancesGuard(name, error);\n    return <WrappedComponent {...(props as any)} />;\n  };\n  Hoc.displayName = `withMaxAllowedInstancesGuard(${displayName})`;\n  return Hoc;\n}\n","import React, { useState } from 'react';\nimport { createPortal } from 'react-dom';\n\nexport type UseCustomElementPortalParams = {\n  component: React.ReactNode;\n  id: number;\n};\n\nexport type UseCustomElementPortalReturn = {\n  portal: () => JSX.Element;\n  mount: (node: Element) => void;\n  unmount: () => void;\n  id: number;\n};\n\n// This function takes a component as prop, and returns functions that mount and unmount\n// the given component into a given node\nexport const useCustomElementPortal = (elements: UseCustomElementPortalParams[]) => {\n  const initialState = Array(elements.length).fill(null);\n  const [nodes, setNodes] = useState<(Element | null)[]>(initialState);\n\n  return elements.map((el, index) => ({\n    id: el.id,\n    mount: (node: Element) => setNodes(prevState => prevState.map((n, i) => (i === index ? node : n))),\n    unmount: () => setNodes(prevState => prevState.map((n, i) => (i === index ? null : n))),\n    portal: () => <>{nodes[index] ? createPortal(el.component, nodes[index] as Element) : null}</>,\n  }));\n};\n","import { logErrorInDevMode } from '@clerk/shared';\nimport type { CustomPage } from '@clerk/types';\nimport type { ReactElement } from 'react';\nimport React from 'react';\n\nimport {\n  OrganizationProfileLink,\n  OrganizationProfilePage,\n  UserProfileLink,\n  UserProfilePage,\n} from '../components/uiComponents';\nimport { customLinkWrongProps, customPagesIgnoredComponent, customPageWrongProps } from '../errors/messages';\nimport type { UserProfilePageProps } from '../types';\nimport type { UseCustomElementPortalParams, UseCustomElementPortalReturn } from './useCustomElementPortal';\nimport { useCustomElementPortal } from './useCustomElementPortal';\n\nconst isThatComponent = (v: any, component: React.ReactNode): v is React.ReactNode => {\n  return !!v && React.isValidElement(v) && (v as React.ReactElement)?.type === component;\n};\n\nexport const useUserProfileCustomPages = (children: React.ReactNode | React.ReactNode[]) => {\n  const reorderItemsLabels = ['account', 'security'];\n  return useCustomPages({\n    children,\n    reorderItemsLabels,\n    LinkComponent: UserProfileLink,\n    PageComponent: UserProfilePage,\n    componentName: 'UserProfile',\n  });\n};\n\nexport const useOrganizationProfileCustomPages = (children: React.ReactNode | React.ReactNode[]) => {\n  const reorderItemsLabels = ['general', 'members'];\n  return useCustomPages({\n    children,\n    reorderItemsLabels,\n    LinkComponent: OrganizationProfileLink,\n    PageComponent: OrganizationProfilePage,\n    componentName: 'OrganizationProfile',\n  });\n};\n\ntype UseCustomPagesParams = {\n  children: React.ReactNode | React.ReactNode[];\n  LinkComponent: any;\n  PageComponent: any;\n  reorderItemsLabels: string[];\n  componentName: string;\n};\n\ntype CustomPageWithIdType = UserProfilePageProps & { children?: React.ReactNode };\n\nconst useCustomPages = ({\n  children,\n  LinkComponent,\n  PageComponent,\n  reorderItemsLabels,\n  componentName,\n}: UseCustomPagesParams) => {\n  const validChildren: CustomPageWithIdType[] = [];\n\n  React.Children.forEach(children, child => {\n    if (!isThatComponent(child, PageComponent) && !isThatComponent(child, LinkComponent)) {\n      if (child) {\n        logErrorInDevMode(customPagesIgnoredComponent(componentName));\n      }\n      return;\n    }\n\n    const { props } = child as ReactElement;\n\n    const { children, label, url, labelIcon } = props;\n\n    if (isThatComponent(child, PageComponent)) {\n      if (isReorderItem(props, reorderItemsLabels)) {\n        // This is a reordering item\n        validChildren.push({ label });\n      } else if (isCustomPage(props)) {\n        // this is a custom page\n        validChildren.push({ label, labelIcon, children, url });\n      } else {\n        logErrorInDevMode(customPageWrongProps(componentName));\n        return;\n      }\n    }\n\n    if (isThatComponent(child, LinkComponent)) {\n      if (isExternalLink(props)) {\n        // This is an external link\n        validChildren.push({ label, labelIcon, url });\n      } else {\n        logErrorInDevMode(customLinkWrongProps(componentName));\n        return;\n      }\n    }\n  });\n\n  const customPageContents: UseCustomElementPortalParams[] = [];\n  const customPageLabelIcons: UseCustomElementPortalParams[] = [];\n  const customLinkLabelIcons: UseCustomElementPortalParams[] = [];\n\n  validChildren.forEach((cp, index) => {\n    if (isCustomPage(cp)) {\n      customPageContents.push({ component: cp.children, id: index });\n      customPageLabelIcons.push({ component: cp.labelIcon, id: index });\n      return;\n    }\n    if (isExternalLink(cp)) {\n      customLinkLabelIcons.push({ component: cp.labelIcon, id: index });\n    }\n  });\n\n  const customPageContentsPortals = useCustomElementPortal(customPageContents);\n  const customPageLabelIconsPortals = useCustomElementPortal(customPageLabelIcons);\n  const customLinkLabelIconsPortals = useCustomElementPortal(customLinkLabelIcons);\n\n  const customPages: CustomPage[] = [];\n  const customPagesPortals: React.ComponentType[] = [];\n\n  validChildren.forEach((cp, index) => {\n    if (isReorderItem(cp, reorderItemsLabels)) {\n      customPages.push({ label: cp.label });\n      return;\n    }\n    if (isCustomPage(cp)) {\n      const {\n        portal: contentPortal,\n        mount,\n        unmount,\n      } = customPageContentsPortals.find(p => p.id === index) as UseCustomElementPortalReturn;\n      const {\n        portal: labelPortal,\n        mount: mountIcon,\n        unmount: unmountIcon,\n      } = customPageLabelIconsPortals.find(p => p.id === index) as UseCustomElementPortalReturn;\n      customPages.push({ label: cp.label, url: cp.url, mount, unmount, mountIcon, unmountIcon });\n      customPagesPortals.push(contentPortal);\n      customPagesPortals.push(labelPortal);\n      return;\n    }\n    if (isExternalLink(cp)) {\n      const {\n        portal: labelPortal,\n        mount: mountIcon,\n        unmount: unmountIcon,\n      } = customLinkLabelIconsPortals.find(p => p.id === index) as UseCustomElementPortalReturn;\n      customPages.push({ label: cp.label, url: cp.url, mountIcon, unmountIcon });\n      customPagesPortals.push(labelPortal);\n      return;\n    }\n  });\n\n  return { customPages, customPagesPortals };\n};\n\nconst isReorderItem = (childProps: any, validItems: string[]): boolean => {\n  const { children, label, url, labelIcon } = childProps;\n  return !children && !url && !labelIcon && validItems.some(v => v === label);\n};\n\nconst isCustomPage = (childProps: any): boolean => {\n  const { children, label, url, labelIcon } = childProps;\n  return !!children && !!url && !!labelIcon && !!label;\n};\n\nconst isExternalLink = (childProps: any): boolean => {\n  const { children, label, url, labelIcon } = childProps;\n  return !children && !!url && !!labelIcon && !!label;\n};\n","import type { SignInProps } from '@clerk/types';\nimport React from 'react';\n\nimport type { SignInButtonProps, WithClerkProp } from '../types';\nimport { assertSingleChild, normalizeWithDefaultValue, safeExecute } from '../utils';\nimport { withClerk } from './withClerk';\n\nexport const SignInButton = withClerk(({ clerk, children, ...props }: WithClerkProp<SignInButtonProps>) => {\n  const { signUpFallbackRedirectUrl, forceRedirectUrl, fallbackRedirectUrl, signUpForceRedirectUrl, mode, ...rest } =\n    props;\n  children = normalizeWithDefaultValue(children, 'Sign in');\n  const child = assertSingleChild(children)('SignInButton');\n\n  const clickHandler = () => {\n    const opts: SignInProps = {\n      forceRedirectUrl,\n      fallbackRedirectUrl,\n      signUpFallbackRedirectUrl,\n      signUpForceRedirectUrl,\n    };\n\n    if (mode === 'modal') {\n      return clerk.openSignIn(opts);\n    }\n    return clerk.redirectToSignIn({\n      ...opts,\n      signInFallbackRedirectUrl: fallbackRedirectUrl,\n      signInForceRedirectUrl: forceRedirectUrl,\n    });\n  };\n\n  const wrappedChildClickHandler: React.MouseEventHandler = async e => {\n    if (child && typeof child === 'object' && 'props' in child) {\n      await safeExecute(child.props.onClick)(e);\n    }\n    return clickHandler();\n  };\n\n  const childProps = { ...rest, onClick: wrappedChildClickHandler };\n  return React.cloneElement(child as React.ReactElement<unknown>, childProps);\n}, 'SignInButton');\n","import type { SignUpProps } from '@clerk/types';\nimport React from 'react';\n\nimport type { SignUpButtonProps, WithClerkProp } from '../types';\nimport { assertSingleChild, normalizeWithDefaultValue, safeExecute } from '../utils';\nimport { withClerk } from './withClerk';\n\nexport const SignUpButton = withClerk(({ clerk, children, ...props }: WithClerkProp<SignUpButtonProps>) => {\n  const {\n    fallbackRedirectUrl,\n    forceRedirectUrl,\n    signInFallbackRedirectUrl,\n    signInForceRedirectUrl,\n    mode,\n    unsafeMetadata,\n    ...rest\n  } = props;\n\n  children = normalizeWithDefaultValue(children, 'Sign up');\n  const child = assertSingleChild(children)('SignUpButton');\n\n  const clickHandler = () => {\n    const opts: SignUpProps = {\n      fallbackRedirectUrl,\n      forceRedirectUrl,\n      signInFallbackRedirectUrl,\n      signInForceRedirectUrl,\n      unsafeMetadata,\n    };\n\n    if (mode === 'modal') {\n      return clerk.openSignUp(opts);\n    }\n\n    return clerk.redirectToSignUp({\n      ...opts,\n      signUpFallbackRedirectUrl: fallbackRedirectUrl,\n      signUpForceRedirectUrl: forceRedirectUrl,\n    });\n  };\n\n  const wrappedChildClickHandler: React.MouseEventHandler = async e => {\n    if (child && typeof child === 'object' && 'props' in child) {\n      await safeExecute(child.props.onClick)(e);\n    }\n    return clickHandler();\n  };\n\n  const childProps = { ...rest, onClick: wrappedChildClickHandler };\n  return React.cloneElement(child as React.ReactElement<unknown>, childProps);\n}, 'SignUpButton');\n","import type { SignOutOptions } from '@clerk/types';\nimport React from 'react';\n\nimport type { WithClerkProp } from '../types';\nimport { assertSingleChild, normalizeWithDefaultValue, safeExecute } from '../utils';\nimport { withClerk } from './withClerk';\n\nexport type SignOutButtonProps = {\n  redirectUrl?: string;\n  signOutOptions?: SignOutOptions;\n  children?: React.ReactNode;\n};\n\nexport const SignOutButton = withClerk(\n  ({ clerk, children, ...props }: React.PropsWithChildren<WithClerkProp<SignOutButtonProps>>) => {\n    const { redirectUrl = '/', signOutOptions, ...rest } = props;\n\n    children = normalizeWithDefaultValue(children, 'Sign out');\n    const child = assertSingleChild(children)('SignOutButton');\n\n    const clickHandler = () => clerk.signOut({ redirectUrl });\n    const wrappedChildClickHandler: React.MouseEventHandler = async e => {\n      await safeExecute((child as any).props.onClick)(e);\n      return clickHandler();\n    };\n\n    const childProps = { ...rest, onClick: wrappedChildClickHandler };\n    return React.cloneElement(child as React.ReactElement<unknown>, childProps);\n  },\n  'SignOutButton',\n);\n","import React from 'react';\n\nimport type { SignInWithMetamaskButtonProps, WithClerkProp } from '../types';\nimport { assertSingleChild, normalizeWithDefaultValue, safeExecute } from '../utils';\nimport { withClerk } from './withClerk';\n\nexport const SignInWithMetamaskButton = withClerk(\n  ({ clerk, children, ...props }: WithClerkProp<SignInWithMetamaskButtonProps>) => {\n    const { redirectUrl, ...rest } = props;\n\n    children = normalizeWithDefaultValue(children, 'Sign in with Metamask');\n    const child = assertSingleChild(children)('SignInWithMetamaskButton');\n\n    // TODO: Properly fix this code\n    // eslint-disable-next-line @typescript-eslint/require-await\n    const clickHandler = async () => {\n      async function authenticate() {\n        await clerk.authenticateWithMetamask({ redirectUrl: redirectUrl || undefined });\n      }\n      void authenticate();\n    };\n\n    const wrappedChildClickHandler: React.MouseEventHandler = async e => {\n      await safeExecute((child as any).props.onClick)(e);\n      return clickHandler();\n    };\n\n    const childProps = { ...rest, onClick: wrappedChildClickHandler };\n    return React.cloneElement(child as React.ReactElement<unknown>, childProps);\n  },\n  'SignInWithMetamask',\n);\n","import { isPublishableKey } from '@clerk/shared/keys';\nimport React from 'react';\n\nimport { errorThrower } from '../errors/errorThrower';\nimport { multipleClerkProvidersError } from '../errors/messages';\nimport type { ClerkProviderProps } from '../types';\nimport { withMaxAllowedInstancesGuard } from '../utils';\nimport { ClerkContextProvider } from './ClerkContextProvider';\n\nfunction ClerkProviderBase(props: ClerkProviderProps): JSX.Element {\n  const { initialState, children, ...restIsomorphicClerkOptions } = props;\n  const { publishableKey = '', Clerk: userInitialisedClerk } = restIsomorphicClerkOptions;\n\n  if (!userInitialisedClerk) {\n    if (!publishableKey) {\n      errorThrower.throwMissingPublishableKeyError();\n    } else if (publishableKey && !isPublishableKey(publishableKey)) {\n      errorThrower.throwInvalidPublishableKeyError({ key: publishableKey });\n    }\n  }\n\n  return (\n    <ClerkContextProvider\n      initialState={initialState}\n      isomorphicClerkOptions={restIsomorphicClerkOptions}\n    >\n      {children}\n    </ClerkContextProvider>\n  );\n}\n\nconst ClerkProvider = withMaxAllowedInstancesGuard(ClerkProviderBase, 'ClerkProvider', multipleClerkProvidersError);\n\nClerkProvider.displayName = 'ClerkProvider';\n\nexport { ClerkProvider };\n","import { ClientContext, OrganizationProvider, SessionContext, UserContext } from '@clerk/shared/react';\nimport type { ClientResource, InitialState, Resources } from '@clerk/types';\nimport React from 'react';\n\nimport { IsomorphicClerk } from '../isomorphicClerk';\nimport type { IsomorphicClerkOptions } from '../types';\nimport { deriveState } from '../utils/deriveState';\nimport { AuthContext } from './AuthContext';\nimport { IsomorphicClerkContext } from './IsomorphicClerkContext';\n\ntype ClerkContextProvider = {\n  isomorphicClerkOptions: IsomorphicClerkOptions;\n  initialState: InitialState | undefined;\n  children: React.ReactNode;\n};\n\nexport type ClerkContextProviderState = Resources;\n\nexport function ClerkContextProvider(props: ClerkContextProvider): JSX.Element | null {\n  const { isomorphicClerkOptions, initialState, children } = props;\n  const { isomorphicClerk: clerk, loaded: clerkLoaded } = useLoadedIsomorphicClerk(isomorphicClerkOptions);\n\n  const [state, setState] = React.useState<ClerkContextProviderState>({\n    client: clerk.client as ClientResource,\n    session: clerk.session,\n    user: clerk.user,\n    organization: clerk.organization,\n  });\n\n  React.useEffect(() => {\n    return clerk.addListener(e => setState({ ...e }));\n  }, []);\n\n  const derivedState = deriveState(clerkLoaded, state, initialState);\n  const clerkCtx = React.useMemo(() => ({ value: clerk }), [clerkLoaded]);\n  const clientCtx = React.useMemo(() => ({ value: state.client }), [state.client]);\n\n  const { sessionId, session, userId, user, orgId, actor, organization, orgRole, orgSlug, orgPermissions } =\n    derivedState;\n\n  const authCtx = React.useMemo(() => {\n    const value = { sessionId, userId, actor, orgId, orgRole, orgSlug, orgPermissions };\n    return { value };\n  }, [sessionId, userId, actor, orgId, orgRole, orgSlug]);\n  const userCtx = React.useMemo(() => ({ value: user }), [userId, user]);\n  const sessionCtx = React.useMemo(() => ({ value: session }), [sessionId, session]);\n  const organizationCtx = React.useMemo(() => {\n    const value = {\n      organization: organization,\n    };\n    return { value };\n  }, [orgId, organization]);\n\n  return (\n    // @ts-expect-error value passed is of type IsomorphicClerk where the context expects LoadedClerk\n    <IsomorphicClerkContext.Provider value={clerkCtx}>\n      <ClientContext.Provider value={clientCtx}>\n        <SessionContext.Provider value={sessionCtx}>\n          <OrganizationProvider {...organizationCtx.value}>\n            <AuthContext.Provider value={authCtx}>\n              <UserContext.Provider value={userCtx}>{children}</UserContext.Provider>\n            </AuthContext.Provider>\n          </OrganizationProvider>\n        </SessionContext.Provider>\n      </ClientContext.Provider>\n    </IsomorphicClerkContext.Provider>\n  );\n}\n\nconst useLoadedIsomorphicClerk = (options: IsomorphicClerkOptions) => {\n  const [loaded, setLoaded] = React.useState(false);\n  const isomorphicClerk = React.useMemo(() => IsomorphicClerk.getOrCreateInstance(options), []);\n\n  React.useEffect(() => {\n    isomorphicClerk.__unstable__updateProps({ appearance: options.appearance });\n  }, [options.appearance]);\n\n  React.useEffect(() => {\n    isomorphicClerk.__unstable__updateProps({ options });\n  }, [options.localization]);\n\n  React.useEffect(() => {\n    isomorphicClerk.addOnLoaded(() => setLoaded(true));\n  }, []);\n\n  React.useEffect(() => {\n    return () => {\n      IsomorphicClerk.clearInstance();\n    };\n  }, []);\n\n  return { isomorphicClerk, loaded };\n};\n","import { inBrowser } from '@clerk/shared/browser';\nimport { handleValueOrFn } from '@clerk/shared/handleValueOrFn';\nimport type { TelemetryCollector } from '@clerk/shared/telemetry';\nimport type {\n  ActiveSessionResource,\n  AuthenticateWithGoogleOneTapParams,\n  AuthenticateWithMetamaskParams,\n  Clerk,\n  ClientResource,\n  CreateOrganizationParams,\n  CreateOrganizationProps,\n  DomainOrProxyUrl,\n  GoogleOneTapProps,\n  HandleEmailLinkVerificationParams,\n  HandleOAuthCallbackParams,\n  InstanceType,\n  ListenerCallback,\n  LoadedClerk,\n  OrganizationListProps,\n  OrganizationProfileProps,\n  OrganizationResource,\n  OrganizationSwitcherProps,\n  RedirectOptions,\n  SDKMetadata,\n  SetActiveParams,\n  SignInProps,\n  SignInRedirectOptions,\n  SignInResource,\n  SignOut,\n  SignOutCallback,\n  SignOutOptions,\n  SignUpProps,\n  SignUpRedirectOptions,\n  SignUpResource,\n  UnsubscribeCallback,\n  UserButtonProps,\n  UserProfileProps,\n  UserResource,\n  Without,\n} from '@clerk/types';\n\nimport { errorThrower } from './errors/errorThrower';\nimport { unsupportedNonBrowserDomainOrProxyUrlFunction } from './errors/messages';\nimport type {\n  BrowserClerk,\n  BrowserClerkConstructor,\n  ClerkProp,\n  HeadlessBrowserClerk,\n  HeadlessBrowserClerkConstructor,\n  IsomorphicClerkOptions,\n} from './types';\nimport { isConstructor, loadClerkJsScript } from './utils';\n\nconst SDK_METADATA = {\n  name: PACKAGE_NAME,\n  version: PACKAGE_VERSION,\n  environment: process.env.NODE_ENV,\n};\n\nexport interface Global {\n  Clerk?: HeadlessBrowserClerk | BrowserClerk;\n}\n\ndeclare const global: Global;\n\ntype GenericFunction<TArgs = never> = (...args: TArgs[]) => unknown;\n\ntype MethodName<T> = {\n  [P in keyof T]: T[P] extends GenericFunction ? P : never;\n}[keyof T];\n\ntype MethodCallback = () => Promise<unknown> | unknown;\n\ntype IsomorphicLoadedClerk = Without<\n  LoadedClerk,\n  /**\n   * Override ClerkJS methods in order to support premountMethodCalls\n   */\n  | 'buildSignInUrl'\n  | 'buildSignUpUrl'\n  | 'buildUserProfileUrl'\n  | 'buildCreateOrganizationUrl'\n  | 'buildOrganizationProfileUrl'\n  | 'buildAfterSignUpUrl'\n  | 'buildAfterSignInUrl'\n  | 'buildAfterSignOutUrl'\n  | 'buildUrlWithAuth'\n  | 'handleRedirectCallback'\n  | 'handleGoogleOneTapCallback'\n  | 'handleUnauthenticated'\n  | 'authenticateWithMetamask'\n  | 'authenticateWithGoogleOneTap'\n  | 'createOrganization'\n  | 'getOrganization'\n  | 'mountUserButton'\n  | 'mountOrganizationList'\n  | 'mountOrganizationSwitcher'\n  | 'mountOrganizationProfile'\n  | 'mountCreateOrganization'\n  | 'mountSignUp'\n  | 'mountSignIn'\n  | 'mountUserProfile'\n  | 'client'\n> & {\n  // TODO: Align return type and parms\n  handleRedirectCallback: (params: HandleOAuthCallbackParams) => void;\n  handleGoogleOneTapCallback: (signInOrUp: SignInResource | SignUpResource, params: HandleOAuthCallbackParams) => void;\n  handleUnauthenticated: () => void;\n  // TODO: Align Promise unknown\n  authenticateWithMetamask: (params: AuthenticateWithMetamaskParams) => Promise<void>;\n  authenticateWithGoogleOneTap: (\n    params: AuthenticateWithGoogleOneTapParams,\n  ) => Promise<SignInResource | SignUpResource>;\n  // TODO: Align return type (maybe not possible or correct)\n  createOrganization: (params: CreateOrganizationParams) => Promise<OrganizationResource | void>;\n  // TODO: Align return type (maybe not possible or correct)\n  getOrganization: (organizationId: string) => Promise<OrganizationResource | void>;\n\n  // TODO: Align return type\n  buildSignInUrl: (opts?: RedirectOptions) => string | void;\n  // TODO: Align return type\n  buildSignUpUrl: (opts?: RedirectOptions) => string | void;\n  // TODO: Align return type\n  buildUserProfileUrl: () => string | void;\n  // TODO: Align return type\n  buildCreateOrganizationUrl: () => string | void;\n  // TODO: Align return type\n  buildOrganizationProfileUrl: () => string | void;\n  // TODO: Align return type\n  buildAfterSignInUrl: () => string | void;\n  // TODO: Align return type\n  buildAfterSignUpUrl: () => string | void;\n  // TODO: Align return type\n  buildAfterSignOutUrl: () => string | void;\n  // TODO: Align optional props\n  mountUserButton: (node: HTMLDivElement, props: UserButtonProps) => void;\n  mountOrganizationList: (node: HTMLDivElement, props: OrganizationListProps) => void;\n  mountOrganizationSwitcher: (node: HTMLDivElement, props: OrganizationSwitcherProps) => void;\n  mountOrganizationProfile: (node: HTMLDivElement, props: OrganizationProfileProps) => void;\n  mountCreateOrganization: (node: HTMLDivElement, props: CreateOrganizationProps) => void;\n  mountSignUp: (node: HTMLDivElement, props: SignUpProps) => void;\n  mountSignIn: (node: HTMLDivElement, props: SignInProps) => void;\n  mountUserProfile: (node: HTMLDivElement, props: UserProfileProps) => void;\n  client: ClientResource | undefined;\n};\n\nexport class IsomorphicClerk implements IsomorphicLoadedClerk {\n  private readonly mode: 'browser' | 'server';\n  private readonly options: IsomorphicClerkOptions;\n  private readonly Clerk: ClerkProp;\n  private clerkjs: BrowserClerk | HeadlessBrowserClerk | null = null;\n  private preopenOneTap?: null | GoogleOneTapProps = null;\n  private preopenSignIn?: null | SignInProps = null;\n  private preopenSignUp?: null | SignUpProps = null;\n  private preopenUserProfile?: null | UserProfileProps = null;\n  private preopenOrganizationProfile?: null | OrganizationProfileProps = null;\n  private preopenCreateOrganization?: null | CreateOrganizationProps = null;\n  private premountSignInNodes = new Map<HTMLDivElement, SignInProps>();\n  private premountSignUpNodes = new Map<HTMLDivElement, SignUpProps>();\n  private premountUserProfileNodes = new Map<HTMLDivElement, UserProfileProps>();\n  private premountUserButtonNodes = new Map<HTMLDivElement, UserButtonProps>();\n  private premountOrganizationProfileNodes = new Map<HTMLDivElement, OrganizationProfileProps>();\n  private premountCreateOrganizationNodes = new Map<HTMLDivElement, CreateOrganizationProps>();\n  private premountOrganizationSwitcherNodes = new Map<HTMLDivElement, OrganizationSwitcherProps>();\n  private premountOrganizationListNodes = new Map<HTMLDivElement, OrganizationListProps>();\n  private premountMethodCalls = new Map<MethodName<BrowserClerk>, MethodCallback>();\n  private loadedListeners: Array<() => void> = [];\n\n  #loaded = false;\n  #domain: DomainOrProxyUrl['domain'];\n  #proxyUrl: DomainOrProxyUrl['proxyUrl'];\n  #publishableKey: string;\n\n  get publishableKey(): string {\n    return this.#publishableKey;\n  }\n\n  get loaded(): boolean {\n    return this.#loaded;\n  }\n\n  static #instance: IsomorphicClerk | null | undefined;\n\n  static getOrCreateInstance(options: IsomorphicClerkOptions) {\n    // During SSR: a new instance should be created for every request\n    // During CSR: use the cached instance for the whole lifetime of the app\n    // Also will recreate the instance if the provided Clerk instance changes\n    // This method should be idempotent in both scenarios\n    if (!inBrowser() || !this.#instance || (options.Clerk && this.#instance.Clerk !== options.Clerk)) {\n      this.#instance = new IsomorphicClerk(options);\n    }\n    return this.#instance;\n  }\n\n  static clearInstance() {\n    this.#instance = null;\n  }\n\n  get domain(): string {\n    // This getter can run in environments where window is not available.\n    // In those cases we should expect and use domain as a string\n    if (typeof window !== 'undefined' && window.location) {\n      return handleValueOrFn(this.#domain, new URL(window.location.href), '');\n    }\n    if (typeof this.#domain === 'function') {\n      return errorThrower.throw(unsupportedNonBrowserDomainOrProxyUrlFunction);\n    }\n    return this.#domain || '';\n  }\n\n  get proxyUrl(): string {\n    // This getter can run in environments where window is not available.\n    // In those cases we should expect and use proxy as a string\n    if (typeof window !== 'undefined' && window.location) {\n      return handleValueOrFn(this.#proxyUrl, new URL(window.location.href), '');\n    }\n    if (typeof this.#proxyUrl === 'function') {\n      return errorThrower.throw(unsupportedNonBrowserDomainOrProxyUrlFunction);\n    }\n    return this.#proxyUrl || '';\n  }\n\n  constructor(options: IsomorphicClerkOptions) {\n    const { Clerk = null, publishableKey } = options || {};\n    this.#publishableKey = publishableKey;\n    this.#proxyUrl = options?.proxyUrl;\n    this.#domain = options?.domain;\n    this.options = options;\n    this.Clerk = Clerk;\n    this.mode = inBrowser() ? 'browser' : 'server';\n\n    if (!this.options.sdkMetadata) {\n      this.options.sdkMetadata = SDK_METADATA;\n    }\n\n    void this.loadClerkJS();\n  }\n\n  get sdkMetadata(): SDKMetadata | undefined {\n    return this.clerkjs?.sdkMetadata || this.options.sdkMetadata || undefined;\n  }\n\n  get instanceType(): InstanceType | undefined {\n    return this.clerkjs?.instanceType;\n  }\n\n  get frontendApi(): string {\n    return this.clerkjs?.frontendApi || '';\n  }\n\n  get isStandardBrowser(): boolean {\n    return this.clerkjs?.isStandardBrowser || this.options.standardBrowser || false;\n  }\n\n  get isSatellite(): boolean {\n    // This getter can run in environments where window is not available.\n    // In those cases we should expect and use domain as a string\n    if (typeof window !== 'undefined' && window.location) {\n      return handleValueOrFn(this.options.isSatellite, new URL(window.location.href), false);\n    }\n    if (typeof this.options.isSatellite === 'function') {\n      return errorThrower.throw(unsupportedNonBrowserDomainOrProxyUrlFunction);\n    }\n    return false;\n  }\n\n  buildSignInUrl = (opts?: RedirectOptions): string | void => {\n    const callback = () => this.clerkjs?.buildSignInUrl(opts) || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildSignInUrl', callback);\n    }\n  };\n\n  buildSignUpUrl = (opts?: RedirectOptions): string | void => {\n    const callback = () => this.clerkjs?.buildSignUpUrl(opts) || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildSignUpUrl', callback);\n    }\n  };\n\n  buildAfterSignInUrl = (): string | void => {\n    const callback = () => this.clerkjs?.buildAfterSignInUrl() || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildAfterSignInUrl', callback);\n    }\n  };\n\n  buildAfterSignUpUrl = (): string | void => {\n    const callback = () => this.clerkjs?.buildAfterSignUpUrl() || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildAfterSignUpUrl', callback);\n    }\n  };\n\n  buildAfterSignOutUrl = (): string | void => {\n    const callback = () => this.clerkjs?.buildAfterSignOutUrl() || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildAfterSignOutUrl', callback);\n    }\n  };\n\n  buildUserProfileUrl = (): string | void => {\n    const callback = () => this.clerkjs?.buildUserProfileUrl() || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildUserProfileUrl', callback);\n    }\n  };\n\n  buildCreateOrganizationUrl = (): string | void => {\n    const callback = () => this.clerkjs?.buildCreateOrganizationUrl() || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildCreateOrganizationUrl', callback);\n    }\n  };\n\n  buildOrganizationProfileUrl = (): string | void => {\n    const callback = () => this.clerkjs?.buildOrganizationProfileUrl() || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildOrganizationProfileUrl', callback);\n    }\n  };\n\n  buildUrlWithAuth = (to: string): string | void => {\n    const callback = () => this.clerkjs?.buildUrlWithAuth(to) || '';\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('buildUrlWithAuth', callback);\n    }\n  };\n\n  handleUnauthenticated = (): void => {\n    const callback = () => this.clerkjs?.handleUnauthenticated();\n    if (this.clerkjs && this.#loaded) {\n      void callback();\n    } else {\n      this.premountMethodCalls.set('handleUnauthenticated', callback);\n    }\n  };\n\n  #waitForClerkJS(): Promise<HeadlessBrowserClerk | BrowserClerk> {\n    return new Promise<HeadlessBrowserClerk | BrowserClerk>(resolve => {\n      if (this.#loaded) {\n        resolve(this.clerkjs!);\n      }\n      this.addOnLoaded(() => resolve(this.clerkjs!));\n    });\n  }\n\n  async loadClerkJS(): Promise<HeadlessBrowserClerk | BrowserClerk | undefined> {\n    if (this.mode !== 'browser' || this.#loaded) {\n      return;\n    }\n\n    // Store frontendAPI value on window as a fallback. This value can be used as a\n    // fallback during ClerkJS hot loading in case ClerkJS fails to find the\n    // \"data-clerk-frontend-api\" attribute on its script tag.\n\n    // This can happen when the DOM is altered completely during client rehydration.\n    // For example, in Remix with React 18 the document changes completely via `hydrateRoot(document)`.\n\n    // For more information refer to:\n    // - https://github.com/remix-run/remix/issues/2947\n    // - https://github.com/facebook/react/issues/24430\n    if (typeof window !== 'undefined') {\n      window.__clerk_publishable_key = this.#publishableKey;\n      window.__clerk_proxy_url = this.proxyUrl;\n      window.__clerk_domain = this.domain;\n    }\n\n    try {\n      if (this.Clerk) {\n        // Set a fixed Clerk version\n        let c: ClerkProp;\n\n        if (isConstructor<BrowserClerkConstructor | HeadlessBrowserClerkConstructor>(this.Clerk)) {\n          // Construct a new Clerk object if a constructor is passed\n          c = new this.Clerk(this.#publishableKey, {\n            proxyUrl: this.proxyUrl,\n            domain: this.domain,\n          } as any);\n\n          await c.load(this.options);\n        } else {\n          // Otherwise use the instantiated Clerk object\n          c = this.Clerk;\n\n          if (!c.loaded) {\n            await c.load(this.options);\n          }\n        }\n\n        global.Clerk = c;\n      } else {\n        // Hot-load latest ClerkJS from Clerk CDN\n        if (!global.Clerk) {\n          await loadClerkJsScript({\n            ...this.options,\n            publishableKey: this.#publishableKey,\n            proxyUrl: this.proxyUrl,\n            domain: this.domain,\n          });\n        }\n\n        if (!global.Clerk) {\n          throw new Error('Failed to download latest ClerkJS. Contact support@clerk.com.');\n        }\n\n        await global.Clerk.load(this.options);\n      }\n\n      if (global.Clerk?.loaded) {\n        return this.hydrateClerkJS(global.Clerk);\n      }\n      return;\n    } catch (err) {\n      const error = err as Error;\n      // In Next.js we can throw a full screen error in development mode.\n      // However, in production throwing an error results in an infinite loop.\n      // More info at: https://github.com/vercel/next.js/issues/6973\n      if (process.env.NODE_ENV === 'production') {\n        console.error(error.stack || error.message || error);\n      } else {\n        throw err;\n      }\n      return;\n    }\n  }\n\n  public addOnLoaded = (cb: () => void) => {\n    this.loadedListeners.push(cb);\n    /**\n     * When IsomorphicClerk is loaded execute the callback directly\n     */\n    if (this.loaded) {\n      this.emitLoaded();\n    }\n  };\n\n  public emitLoaded = () => {\n    this.loadedListeners.forEach(cb => cb());\n    this.loadedListeners = [];\n  };\n\n  private hydrateClerkJS = (clerkjs: BrowserClerk | HeadlessBrowserClerk | undefined) => {\n    if (!clerkjs) {\n      throw new Error('Failed to hydrate latest Clerk JS');\n    }\n\n    this.clerkjs = clerkjs;\n\n    this.premountMethodCalls.forEach(cb => cb());\n\n    if (this.preopenSignIn !== null) {\n      clerkjs.openSignIn(this.preopenSignIn);\n    }\n\n    if (this.preopenSignUp !== null) {\n      clerkjs.openSignUp(this.preopenSignUp);\n    }\n\n    if (this.preopenUserProfile !== null) {\n      clerkjs.openUserProfile(this.preopenUserProfile);\n    }\n\n    if (this.preopenOneTap !== null) {\n      clerkjs.openGoogleOneTap(this.preopenOneTap);\n    }\n\n    if (this.preopenOrganizationProfile !== null) {\n      clerkjs.openOrganizationProfile(this.preopenOrganizationProfile);\n    }\n\n    if (this.preopenCreateOrganization !== null) {\n      clerkjs.openCreateOrganization(this.preopenCreateOrganization);\n    }\n\n    this.premountSignInNodes.forEach((props: SignInProps, node: HTMLDivElement) => {\n      clerkjs.mountSignIn(node, props);\n    });\n\n    this.premountSignUpNodes.forEach((props: SignUpProps, node: HTMLDivElement) => {\n      clerkjs.mountSignUp(node, props);\n    });\n\n    this.premountUserProfileNodes.forEach((props: UserProfileProps, node: HTMLDivElement) => {\n      clerkjs.mountUserProfile(node, props);\n    });\n\n    this.premountUserButtonNodes.forEach((props: UserButtonProps, node: HTMLDivElement) => {\n      clerkjs.mountUserButton(node, props);\n    });\n\n    this.premountOrganizationListNodes.forEach((props: OrganizationListProps, node: HTMLDivElement) => {\n      clerkjs.mountOrganizationList(node, props);\n    });\n\n    this.#loaded = true;\n    this.emitLoaded();\n    return this.clerkjs;\n  };\n\n  get version(): string | undefined {\n    return this.clerkjs?.version;\n  }\n\n  get client(): ClientResource | undefined {\n    if (this.clerkjs) {\n      return this.clerkjs.client;\n      // TODO: add ssr condition\n    } else {\n      return undefined;\n    }\n  }\n\n  get session(): ActiveSessionResource | undefined | null {\n    if (this.clerkjs) {\n      return this.clerkjs.session;\n    } else {\n      return undefined;\n    }\n  }\n\n  get user(): UserResource | undefined | null {\n    if (this.clerkjs) {\n      return this.clerkjs.user;\n    } else {\n      return undefined;\n    }\n  }\n\n  get organization(): OrganizationResource | undefined | null {\n    if (this.clerkjs) {\n      return this.clerkjs.organization;\n    } else {\n      return undefined;\n    }\n  }\n\n  get telemetry(): TelemetryCollector | undefined {\n    if (this.clerkjs) {\n      // @ts-expect-error -- We can't add the type here due to the TelemetryCollector type existing in shared, but the Clerk type existing in types\n      return this.clerkjs.telemetry;\n    } else {\n      return undefined;\n    }\n  }\n\n  get __unstable__environment(): any {\n    if (this.clerkjs) {\n      return (this.clerkjs as any).__unstable__environment;\n      // TODO: add ssr condition\n    } else {\n      return undefined;\n    }\n  }\n\n  __unstable__setEnvironment(...args: any): void {\n    if (this.clerkjs && '__unstable__setEnvironment' in this.clerkjs) {\n      (this.clerkjs as any).__unstable__setEnvironment(args);\n    } else {\n      return undefined;\n    }\n  }\n\n  __unstable__updateProps = (props: any): any => {\n    // Handle case where accounts has clerk-react@4 installed, but clerk-js@3 is manually loaded\n    if (this.clerkjs && '__unstable__updateProps' in this.clerkjs) {\n      (this.clerkjs as any).__unstable__updateProps(props);\n    } else {\n      return undefined;\n    }\n  };\n\n  /**\n   * `setActive` can be used to set the active session and/or organization.\n   */\n  setActive = ({ session, organization, beforeEmit }: SetActiveParams): Promise<void> => {\n    if (this.clerkjs) {\n      return this.clerkjs.setActive({ session, organization, beforeEmit });\n    } else {\n      return Promise.reject();\n    }\n  };\n\n  openSignIn = (props?: SignInProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.openSignIn(props);\n    } else {\n      this.preopenSignIn = props;\n    }\n  };\n\n  closeSignIn = (): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.closeSignIn();\n    } else {\n      this.preopenSignIn = null;\n    }\n  };\n\n  openGoogleOneTap = (props?: GoogleOneTapProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.openGoogleOneTap(props);\n    } else {\n      this.preopenOneTap = props;\n    }\n  };\n\n  closeGoogleOneTap = (): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.closeGoogleOneTap();\n    } else {\n      this.preopenOneTap = null;\n    }\n  };\n\n  openUserProfile = (props?: UserProfileProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.openUserProfile(props);\n    } else {\n      this.preopenUserProfile = props;\n    }\n  };\n\n  closeUserProfile = (): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.closeUserProfile();\n    } else {\n      this.preopenUserProfile = null;\n    }\n  };\n\n  openOrganizationProfile = (props?: OrganizationProfileProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.openOrganizationProfile(props);\n    } else {\n      this.preopenOrganizationProfile = props;\n    }\n  };\n\n  closeOrganizationProfile = (): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.closeOrganizationProfile();\n    } else {\n      this.preopenOrganizationProfile = null;\n    }\n  };\n\n  openCreateOrganization = (props?: CreateOrganizationProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.openCreateOrganization(props);\n    } else {\n      this.preopenCreateOrganization = props;\n    }\n  };\n\n  closeCreateOrganization = (): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.closeCreateOrganization();\n    } else {\n      this.preopenCreateOrganization = null;\n    }\n  };\n\n  openSignUp = (props?: SignUpProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.openSignUp(props);\n    } else {\n      this.preopenSignUp = props;\n    }\n  };\n\n  closeSignUp = (): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.closeSignUp();\n    } else {\n      this.preopenSignUp = null;\n    }\n  };\n\n  mountSignIn = (node: HTMLDivElement, props: SignInProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountSignIn(node, props);\n    } else {\n      this.premountSignInNodes.set(node, props);\n    }\n  };\n\n  unmountSignIn = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountSignIn(node);\n    } else {\n      this.premountSignInNodes.delete(node);\n    }\n  };\n\n  mountSignUp = (node: HTMLDivElement, props: SignUpProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountSignUp(node, props);\n    } else {\n      this.premountSignUpNodes.set(node, props);\n    }\n  };\n\n  unmountSignUp = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountSignUp(node);\n    } else {\n      this.premountSignUpNodes.delete(node);\n    }\n  };\n\n  mountUserProfile = (node: HTMLDivElement, props: UserProfileProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountUserProfile(node, props);\n    } else {\n      this.premountUserProfileNodes.set(node, props);\n    }\n  };\n\n  unmountUserProfile = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountUserProfile(node);\n    } else {\n      this.premountUserProfileNodes.delete(node);\n    }\n  };\n\n  mountOrganizationProfile = (node: HTMLDivElement, props: OrganizationProfileProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountOrganizationProfile(node, props);\n    } else {\n      this.premountOrganizationProfileNodes.set(node, props);\n    }\n  };\n\n  unmountOrganizationProfile = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountOrganizationProfile(node);\n    } else {\n      this.premountOrganizationProfileNodes.delete(node);\n    }\n  };\n\n  mountCreateOrganization = (node: HTMLDivElement, props: CreateOrganizationProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountCreateOrganization(node, props);\n    } else {\n      this.premountCreateOrganizationNodes.set(node, props);\n    }\n  };\n\n  unmountCreateOrganization = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountCreateOrganization(node);\n    } else {\n      this.premountCreateOrganizationNodes.delete(node);\n    }\n  };\n\n  mountOrganizationSwitcher = (node: HTMLDivElement, props: OrganizationSwitcherProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountOrganizationSwitcher(node, props);\n    } else {\n      this.premountOrganizationSwitcherNodes.set(node, props);\n    }\n  };\n\n  unmountOrganizationSwitcher = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountOrganizationSwitcher(node);\n    } else {\n      this.premountOrganizationSwitcherNodes.delete(node);\n    }\n  };\n\n  mountOrganizationList = (node: HTMLDivElement, props: OrganizationListProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountOrganizationList(node, props);\n    } else {\n      this.premountOrganizationListNodes.set(node, props);\n    }\n  };\n\n  unmountOrganizationList = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountOrganizationList(node);\n    } else {\n      this.premountOrganizationListNodes.delete(node);\n    }\n  };\n\n  mountUserButton = (node: HTMLDivElement, userButtonProps: UserButtonProps): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.mountUserButton(node, userButtonProps);\n    } else {\n      this.premountUserButtonNodes.set(node, userButtonProps);\n    }\n  };\n\n  unmountUserButton = (node: HTMLDivElement): void => {\n    if (this.clerkjs && this.#loaded) {\n      this.clerkjs.unmountUserButton(node);\n    } else {\n      this.premountUserButtonNodes.delete(node);\n    }\n  };\n\n  addListener = (listener: ListenerCallback): UnsubscribeCallback => {\n    const callback = () => this.clerkjs?.addListener(listener);\n\n    if (this.clerkjs) {\n      return callback() as UnsubscribeCallback;\n    } else {\n      this.premountMethodCalls.set('addListener', callback);\n      return () => this.premountMethodCalls.delete('addListener');\n    }\n  };\n\n  navigate = (to: string): void => {\n    const callback = () => this.clerkjs?.navigate(to);\n    if (this.clerkjs && this.#loaded) {\n      void callback();\n    } else {\n      this.premountMethodCalls.set('navigate', callback);\n    }\n  };\n\n  redirectWithAuth = async (...args: Parameters<Clerk['redirectWithAuth']>): Promise<unknown> => {\n    const callback = () => this.clerkjs?.redirectWithAuth(...args);\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectWithAuth', callback);\n      return;\n    }\n  };\n\n  redirectToSignIn = async (opts: SignInRedirectOptions): Promise<unknown> => {\n    const callback = () => this.clerkjs?.redirectToSignIn(opts as any);\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectToSignIn', callback);\n      return;\n    }\n  };\n\n  redirectToSignUp = async (opts: SignUpRedirectOptions): Promise<unknown> => {\n    const callback = () => this.clerkjs?.redirectToSignUp(opts as any);\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectToSignUp', callback);\n      return;\n    }\n  };\n\n  redirectToUserProfile = async (): Promise<unknown> => {\n    const callback = () => this.clerkjs?.redirectToUserProfile();\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectToUserProfile', callback);\n      return;\n    }\n  };\n\n  redirectToAfterSignUp = (): void => {\n    const callback = () => this.clerkjs?.redirectToAfterSignUp();\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectToAfterSignUp', callback);\n    }\n  };\n\n  redirectToAfterSignIn = (): void => {\n    const callback = () => this.clerkjs?.redirectToAfterSignIn();\n    if (this.clerkjs && this.#loaded) {\n      callback();\n    } else {\n      this.premountMethodCalls.set('redirectToAfterSignIn', callback);\n    }\n  };\n\n  redirectToAfterSignOut = (): void => {\n    const callback = () => this.clerkjs?.redirectToAfterSignOut();\n    if (this.clerkjs && this.#loaded) {\n      callback();\n    } else {\n      this.premountMethodCalls.set('redirectToAfterSignOut', callback);\n    }\n  };\n\n  redirectToOrganizationProfile = async (): Promise<unknown> => {\n    const callback = () => this.clerkjs?.redirectToOrganizationProfile();\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectToOrganizationProfile', callback);\n      return;\n    }\n  };\n\n  redirectToCreateOrganization = async (): Promise<unknown> => {\n    const callback = () => this.clerkjs?.redirectToCreateOrganization();\n    if (this.clerkjs && this.#loaded) {\n      return callback();\n    } else {\n      this.premountMethodCalls.set('redirectToCreateOrganization', callback);\n      return;\n    }\n  };\n\n  handleRedirectCallback = (params: HandleOAuthCallbackParams): void => {\n    const callback = () => this.clerkjs?.handleRedirectCallback(params);\n    if (this.clerkjs && this.#loaded) {\n      void callback()?.catch(() => {\n        // This error is caused when the host app is using React18\n        // and strictMode is enabled. This useEffects runs twice because\n        // the clerk-react ui components mounts, unmounts and mounts again\n        // so the clerk-js component loses its state because of the custom\n        // unmount callback we're using.\n        // This needs to be solved by tweaking the logic in uiComponents.tsx\n        // or by making handleRedirectCallback idempotent\n      });\n    } else {\n      this.premountMethodCalls.set('handleRedirectCallback', callback);\n    }\n  };\n\n  handleGoogleOneTapCallback = (\n    signInOrUp: SignInResource | SignUpResource,\n    params: HandleOAuthCallbackParams,\n  ): void => {\n    const callback = () => this.clerkjs?.handleGoogleOneTapCallback(signInOrUp, params);\n    if (this.clerkjs && this.#loaded) {\n      void callback()?.catch(() => {\n        // This error is caused when the host app is using React18\n        // and strictMode is enabled. This useEffects runs twice because\n        // the clerk-react ui components mounts, unmounts and mounts again\n        // so the clerk-js component loses its state because of the custom\n        // unmount callback we're using.\n        // This needs to be solved by tweaking the logic in uiComponents.tsx\n        // or by making handleRedirectCallback idempotent\n      });\n    } else {\n      this.premountMethodCalls.set('handleGoogleOneTapCallback', callback);\n    }\n  };\n\n  handleEmailLinkVerification = async (params: HandleEmailLinkVerificationParams): Promise<void> => {\n    const callback = () => this.clerkjs?.handleEmailLinkVerification(params);\n    if (this.clerkjs && this.#loaded) {\n      return callback() as Promise<void>;\n    } else {\n      this.premountMethodCalls.set('handleEmailLinkVerification', callback);\n    }\n  };\n\n  authenticateWithMetamask = async (params: AuthenticateWithMetamaskParams): Promise<void> => {\n    const callback = () => this.clerkjs?.authenticateWithMetamask(params);\n    if (this.clerkjs && this.#loaded) {\n      return callback() as Promise<void>;\n    } else {\n      this.premountMethodCalls.set('authenticateWithMetamask', callback);\n    }\n  };\n\n  authenticateWithGoogleOneTap = async (\n    params: AuthenticateWithGoogleOneTapParams,\n  ): Promise<SignInResource | SignUpResource> => {\n    const clerkjs = await this.#waitForClerkJS();\n    return clerkjs.authenticateWithGoogleOneTap(params);\n  };\n\n  createOrganization = async (params: CreateOrganizationParams): Promise<OrganizationResource | void> => {\n    const callback = () => this.clerkjs?.createOrganization(params);\n    if (this.clerkjs && this.#loaded) {\n      return callback() as Promise<OrganizationResource>;\n    } else {\n      this.premountMethodCalls.set('createOrganization', callback);\n    }\n  };\n\n  getOrganization = async (organizationId: string): Promise<OrganizationResource | void> => {\n    const callback = () => this.clerkjs?.getOrganization(organizationId);\n    if (this.clerkjs && this.#loaded) {\n      return callback() as Promise<OrganizationResource>;\n    } else {\n      this.premountMethodCalls.set('getOrganization', callback);\n    }\n  };\n\n  signOut: SignOut = async (\n    signOutCallbackOrOptions?: SignOutCallback | SignOutOptions,\n    options?: SignOutOptions,\n  ): Promise<void> => {\n    const callback = () => this.clerkjs?.signOut(signOutCallbackOrOptions as any, options);\n    if (this.clerkjs && this.#loaded) {\n      return callback() as Promise<void>;\n    } else {\n      this.premountMethodCalls.set('signOut', callback);\n    }\n  };\n}\n","import type {\n  ActiveSessionResource,\n  InitialState,\n  OrganizationCustomPermissionKey,\n  OrganizationCustomRoleKey,\n  OrganizationResource,\n  Resources,\n  UserResource,\n} from '@clerk/types';\n\nexport const deriveState = (clerkLoaded: boolean, state: Resources, initialState: InitialState | undefined) => {\n  if (!clerkLoaded && initialState) {\n    return deriveFromSsrInitialState(initialState);\n  }\n  return deriveFromClientSideState(state);\n};\n\nconst deriveFromSsrInitialState = (initialState: InitialState) => {\n  const userId = initialState.userId;\n  const user = initialState.user as UserResource;\n  const sessionId = initialState.sessionId;\n  const session = initialState.session as ActiveSessionResource;\n  const organization = initialState.organization as OrganizationResource;\n  const orgId = initialState.orgId;\n  const orgRole = initialState.orgRole as OrganizationCustomRoleKey;\n  const orgPermissions = initialState.orgPermissions as OrganizationCustomPermissionKey[];\n  const orgSlug = initialState.orgSlug;\n  const actor = initialState.actor;\n\n  return {\n    userId,\n    user,\n    sessionId,\n    session,\n    organization,\n    orgId,\n    orgRole,\n    orgPermissions,\n    orgSlug,\n    actor,\n  };\n};\n\nconst deriveFromClientSideState = (state: Resources) => {\n  const userId: string | null | undefined = state.user ? state.user.id : state.user;\n  const user = state.user;\n  const sessionId: string | null | undefined = state.session ? state.session.id : state.session;\n  const session = state.session;\n  const actor = session?.actor;\n  const organization = state.organization;\n  const orgId: string | null | undefined = state.organization ? state.organization.id : state.organization;\n  const orgSlug = organization?.slug;\n  const membership = organization\n    ? user?.organizationMemberships?.find(om => om.organization.id === orgId)\n    : organization;\n  const orgPermissions = membership ? membership.permissions : membership;\n  const orgRole = membership ? membership.role : membership;\n\n  return {\n    userId,\n    user,\n    sessionId,\n    session,\n    organization,\n    orgId,\n    orgRole,\n    orgSlug,\n    orgPermissions,\n    actor,\n  };\n};\n","import './polyfills';\n\nimport { setErrorThrowerOptions } from './errors/errorThrower';\n\nexport * from './components';\nexport * from './contexts';\n\nexport * from './hooks';\nexport { useEmailLink } from './hooks/useEmailLink';\nexport type { BrowserClerk, ClerkProp, HeadlessBrowserClerk, ClerkProviderProps } from './types';\n\nsetErrorThrowerOptions({ packageName: PACKAGE_NAME });\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}